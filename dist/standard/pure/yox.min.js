!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=e()}(this,(function(){"use strict";var t=!0,e=!1,n=null,r=void 0,o="undefined",i="function",u="length",f=".",s=typeof window!==o?window:r,c=function(){},a=Object.freeze({}),p=Object.freeze([]),l="",v=/yox/.test(c.toString())?2:3,h={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:e,minifyCompiled:e,logLevel:v};function y(t){return typeof t===i}function d(t){return Array.isArray(t)}function g(t){return t!==n&&"object"==typeof t}function m(t){return"string"==typeof t}function b(t){return"number"==typeof t&&!isNaN(t)}function w(n){return n===t||n===e}function x(t){return!isNaN(t-parseFloat(t))}var E=Object.freeze({__proto__:null,func:y,array:d,object:g,string:m,number:b,boolean:w,numeric:x});function $(t,e,n){return d(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}var k=function(t,e){this.type=t,this.phase=k.PHASE_CURRENT,e&&(this.originalEvent=e)};function A(t,n,r){var o=t.length;if(o)if(r)for(var i=o-1;i>=0&&n(t[i],i)!==e;i--);else for(var u=0;u<o&&n(t[u],u)!==e;u++);}function O(t,e){t[t.length]=e}function _(t,e){t.unshift(e)}function T(t,e,n){d(e)?A(e,(function(e){n(t,e)})):n(t,e)}function j(t,e){T(t,e,O)}function C(t,e){T(t,e,_)}function D(t,n,r){var o=-1;return A(t,(function(t,i){if(r===e?t==n:t===n)return o=i,e})),o}function P(n,r,o){var i=0;return A(n,(function(t,u){(o===e?t==r:t===r)&&(n.splice(u,1),i++)}),t),i}function R(t,e,n){return D(t,e,n)>=0}function z(t,e){return t.join(e)}function S(t){return!d(t)||!t.length}k.is=function(t){return t instanceof k},k.prototype.preventDefault=function(){var e=this;if(!e.isPrevented){var n=e.originalEvent;n&&n.preventDefault(),e.isPrevented=t}return e},k.prototype.stopPropagation=function(){var e=this;if(!e.isStoped){var n=e.originalEvent;n&&n.stopPropagation(),e.isStoped=t}return e},k.prototype.prevent=function(){return this.preventDefault()},k.prototype.stop=function(){return this.stopPropagation()},k.PHASE_CURRENT=0,k.PHASE_UPWARD=1,k.PHASE_DOWNWARD=-1;var N=Object.freeze({__proto__:null,each:A,push:j,unshift:C,indexOf:D,last:function(t){var e=t.length;if(e>0)return t[e-1]},pop:function(t){if(t.length>0)return t.pop()},remove:P,has:R,toArray:function(t){return d(t)?t:$(p.slice,t)},toObject:function(t,e,n){var r={};return A(t,(function(t){r[e?t[e]:t]=n||t})),r},join:z,falsy:S});function W(t){return y(t)&&function(t,e){return t!=n&&t.toString?t.toString():e!==r?e:l}(t).indexOf("[native code]")>=0}var F=function(){var t=Object.create(n);return{get:function(e){return t[e]},set:function(e,n){t[e]=n},has:function(e){return e in t},keys:function(){return Object.keys(t)}}};function U(t){var e=F();return function(n){var o=e.get(n);if(o!==r)return o;var i=t(n);return e.set(n,i),i}}function H(t){var e=F();return function(n,r){var o=e.get(n);if(o){var i=o.get(r);if(i)return i}else o=F(),e.set(n,o);var u=t(n,r);return o.set(r,u),u}}var I=/-([a-z])/gi,Y=/\B([A-Z])/g,M=/^[a-z]/,K=U((function(t){return t.replace(I,(function(t,e){return Q(e)}))})),L=U((function(t){return t.replace(Y,(function(t,e){return"-"+X(e)}))})),V=U((function(t){return t.replace(M,Q)}));function q(t,e,n){return b(n)?e===n?l:t.slice(e,n):t.slice(e)}function B(t,e,n){return t.indexOf(e,n!==r?n:0)}function G(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function Z(t,e){return 0===B(t,e)}function J(t,e){return t.charCodeAt(e||0)}function Q(t){return t.toUpperCase()}function X(t){return t.toLowerCase()}function tt(t,e){return B(t,e)>=0}function et(t){return!m(t)||!t.length}var nt=Object.freeze({__proto__:null,camelize:K,hyphenate:L,capitalize:V,repeat:function(t,e){return z(new Array(e+1),t)},trim:function(t){return et(t)?l:t.trim()},slice:q,indexOf:B,lastIndexOf:G,startsWith:Z,endsWith:function(t,e){var n=t.length-e.length;return n>=0&&G(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:J,upper:Q,lower:X,has:tt,falsy:et}),rt=/\./g,ot=/\*/g,it=/\*\*/g,ut=H((function(t,e){return t===e||Z(t,e+=f)?e.length:-1})),ft=U((function(t){return B(t,f)<0?[t]:t.split(f)}));function st(t,n){for(var r=ft(t),o=0,i=r.length-1;o<=i&&n(r[o],o,i)!==e;o++);}var ct=H((function(t,e){return t&&e?t+f+e:t||e})),at=U((function(t){return tt(t,"*")})),pt=U((function(t){return new RegExp("^"+t.replace(rt,"\\.").replace(ot,"(\\w+)").replace(it,"([.\\w]+?)")+"$")})),lt=H((function(t,e){var n=t.match(pt(e));return n?n[1]:r})),vt={value:r};function ht(t){return Object.keys(t)}function yt(t,n){for(var r in t)if(n(t[r],r)===e)break}function dt(t,e){return yt(e,(function(e,n){t[n]=e})),t}function gt(t,e){var n=t;return d(t)?e?(n=[],A(t,(function(t,r){n[r]=gt(t,e)}))):n=t.slice():g(t)&&(n={},yt(t,(function(t,r){n[r]=e?gt(t,e):t}))),n}function mt(t,o){var i=t;return st(o,(function(t,o,u){if(i==n)return i=r,e;var f=i[t],s=f!==r;f&&y(f.get)&&(f=f.get()),o===u?s?(vt.value=f,i=vt):i=r:i=f})),i}function bt(t,e){return t[e]!==r}var wt=Object.freeze({__proto__:null,keys:ht,each:yt,extend:dt,merge:function(t,e){return t&&e?dt(dt({},t),e):t||e},copy:gt,get:mt,set:function(t,n,r,o){var i=t;st(n,(function(t,n,u){if(n===u)i[t]=r;else if(i[t])i=i[t];else{if(!o)return e;i=i[t]={}}}))},has:bt,falsy:function(t){return!g(t)||d(t)||!ht(t).length}}),xt=typeof console!==o?console:n,Et=s&&/edge|msie|trident/i.test(s.navigator.userAgent)?l:"%c",$t=xt?Et?function(t,e,n){xt.log(Et+t,n,e)}:function(t,e){xt.log(t,e)}:c;function kt(){var t=h.logLevel;return t>=1&&t<=5?t:v}function At(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var Ot=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){kt()<=1&&$t(e||"Yox debug",t,At("#999"))},info:function(t,e){kt()<=2&&$t(e||"Yox info",t,At("#2db7f5"))},warn:function(t,e){kt()<=3&&$t(e||"Yox warn",t,At("#f90"))},error:function(t,e){kt()<=4&&$t(e||"Yox error",t,At("#ed4014"))},fatal:function(t,e){if(kt()<=5)throw new Error("["+(e||"Yox fatal")+"]: "+t)}}),_t=function(t){this.ns=t||e,this.listeners={}};function Tt(e,n){return e?e===n.listener:t}function jt(e,n){var r=n.ns;return r&&e?r===e:t}_t.prototype.fire=function(n,o,i){var u=this,f=m(n)?u.toEvent(n):n,s=u.listeners[f.type],c=t;if(s){s=s.slice();for(var a=o&&k.is(o[0])?o[0]:r,p=0,l=s.length;p<l;p++){var v=s[p];if(jt(f.ns,v)&&R(s,v)&&(!i||i(f,o,v))){var h=$(v.listener,v.ctx,o);if(v.num=v.num?v.num+1:1,v.num===v.max&&u.off(f.type,{ns:f.ns,listener:v.listener}),a&&(h===e?a.prevent().stop():a.isStoped&&(h=e)),h===e){c=e;break}}}}return c},_t.prototype.on=function(t,e){var n=this.listeners,r=y(e)?{listener:e}:e;if(g(r)&&y(r.listener)){if(!m(r.ns)){var o=this.toEvent(t);r.ns=o.ns,t=o.type}j(n[t]||(n[t]=[]),r)}},_t.prototype.off=function(e,n){var r=this,o=r.listeners;if(e){var i=r.toFilter(e,n),u=function(e,n){A(e,(function(t,n){Tt(i.listener,t)&&jt(i.ns,t)&&e.splice(n,1)}),t),e.length||delete o[n]};i.type?o[i.type]&&u(o[i.type],i.type):i.ns&&yt(o,u)}else r.listeners={}},_t.prototype.has=function(n,r){var o=this.listeners,i=this.toFilter(n,r),u=t,f=function(t){return A(t,(function(t){if(Tt(i.listener,t)&&jt(i.ns,t))return u=e})),u};return i.type?o[i.type]&&f(o[i.type]):i.ns&&yt(o,f),!u},_t.prototype.toEvent=function(t){var e={type:t,ns:l};if(this.ns){var n=B(t,f);n>=0&&(e.type=q(t,0,n),e.ns=q(t,n+1))}return e},_t.prototype.toFilter=function(t,e){var n;if(m((n=e?y(e)?{listener:e}:e:{}).ns))n.type=t;else{var r=this.toEvent(t);n.type=r.type,n.ns=r.ns}return n},typeof setImmediate===i&&W(setImmediate)&&setImmediate;var Ct,Dt=typeof MessageChannel===i&&W(MessageChannel)?function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout,Pt=function(t){this.tasks=[],this.hooks=t||a};function Rt(t,e){return x(t)?+t:e!==r?e:0}Pt.shared=function(){return Ct||(Ct=new Pt)},Pt.prototype.append=function(t,e){var n=this,r=n.tasks;j(r,{fn:t,ctx:e}),1===r.length&&Dt((function(){n.run()}))},Pt.prototype.prepend=function(t,e){var n=this,r=n.tasks;C(r,{fn:t,ctx:e}),1===r.length&&Dt((function(){n.run()}))},Pt.prototype.clear=function(){this.tasks.length=0},Pt.prototype.run=function(){var t=this,e=t.tasks,n=t.hooks,r=e.length;if(r){t.tasks=[],n.beforeTask&&n.beforeTask();for(var o=0;o<r;o++)$(e[o].fn,e[o].ctx);n.afterTask&&n.afterTask()}};var zt=function(e,n,r,o,i,u,f){var s=this;if(s.keypath=e,s.cache=r,s.deps=o,s.observer=i,s.getter=u,s.setter=f,s.watcherOptions={sync:n,watcher:s.watcher=function(n,r,o){var u=s.value,f=s.get(t);f!==u&&i.diff(e,f,u)}},o){s.fixed=t;for(var c=0,a=o.length;c<a;c++)i.watch(o[c],s.watcherOptions)}};function St(t,e){if(t==n||e===l)return t;var r=mt(t,e);return r?r.value:void 0}function Nt(e,n,o,i,f,s){var c=function(t,n,o){if(n!==o){for(var u=ct(e,t),c=0;c<f;c++){var a=i[c];lt(u,a)!==r&&s(a,u,n,o)}Nt(u,n,o,i,f,s)}};(function(e,n,o){var i=m(e),f=m(n);if(i||f)return o(u,i?e.length:r,f?n.length:r),t})(n,o,c)||function(e,n,o){var i=d(e),f=d(n);if(i||f){var s=i?e.length:r,c=f?n.length:r;o(u,s,c);for(var a=0,p=Math.max(s||0,c||0);a<p;a++)o(l+a,i?e[a]:r,f?n[a]:r);return t}}(n,o,c)||function(e,n,o){var i=g(e),u=g(n);if(i||u){var f=F(),s=i?e:a,c=u?n:a;if(i)for(var p in s){var l=s[p];l!==c[p]&&(f.set(p,t),o(p,l,c[p]))}if(u)for(var v in c){var h=c[v];f.get(v)===r&&h!==s[v]&&o(v,s[v],h)}}}(n,o,c)}function Wt(t,e,n,o,i,u){var f;for(var s in o)if(at(s))lt(t,s)!==r?u(s,t,e,n):i&&(f?f.push(s):f=[s]);else{var c=ut(s,t);if(c>=0){var a=q(s,c),p=St(e,a),l=St(n,a);p!==l&&u(s,s,p,l)}}f&&Nt(t,e,n,f,f.length,u)}zt.prototype.get=function(t){var e=this,n=e.getter,r=e.deps,o=e.observer,i=e.watcher,u=e.watcherOptions;if(e.cache){if(t||!bt(e,"value"))if(e.fixed)e.value=n();else{if(r)for(var f=r.length-1;f>=0;f--)o.unwatch(r[f],i);e.unique=F();var s=zt.current;zt.current=e,e.value=n();for(var c=e.unique.keys(),a=0,p=c.length;a<p;a++)o.watch(c[a],u);e.deps=c,zt.current=s}}else e.value=n();return e.value},zt.prototype.set=function(t){var e=this.setter;e&&e(t)},zt.prototype.add=function(e){this.unique.set(e,t)};var Ft={watcher:c};function Ut(e,n){return y(e)?(Ft.watcher=e,Ft.immediate=n===t,Ft):e}var Ht=function(t,e,n){var r=this;r.data=t||{},r.context=e||r,r.nextTask=n||new Pt,r.syncEmitter=new _t,r.asyncEmitter=new _t,r.asyncOldValues={},r.asyncKeypaths={}};Ht.prototype.get=function(t,e,n){var r,o=zt.current,i=this.data,u=this.computed;return t===l?i:(o&&!n&&o.add(t),u&&(r=mt(u,t)),r||(r=mt(i,t)),r?r.value:e)},Ht.prototype.set=function(t,e){var n=this,r=n.data,o=n.computed,i=function(t,e){var i,u=n.get(t);e!==u&&(st(t,(function(t,n,u){0!==n?i&&(n===u?i[t]=e:i=i[t]||(i[t]={})):o&&o[t]?0===u?o[t].set(e):i=o[t].get():0===u?r[t]=e:i=r[t]||(r[t]={})})),n.diff(t,e,u))};if(m(t))i(t,e);else if(g(t))for(var u in t)i(u,t[u])},Ht.prototype.diff=function(e,n,r){var o=this,i=o.syncEmitter,u=o.asyncEmitter,f=o.asyncOldValues,s=o.asyncKeypaths,c=36!==J(e);Wt(e,n,r,i.listeners,c,(function(t,e,n,r){i.fire({type:t,ns:l},[n,r,e])})),Wt(e,n,r,u.listeners,c,(function(e,n,r,i){for(var c=u.listeners[e],a=0,p=c.length;a<p;a++)c[a].count++;s[n]||(f[n]=i,s[n]={}),s[n][e]=t,o.pending||(o.pending=t,o.nextTask.append((function(){o.pending&&o.diffAsync()})))}))},Ht.prototype.diffAsync=function(){var t=this,e=t.asyncEmitter,n=t.asyncOldValues,o=t.asyncKeypaths;t.pending=r,t.asyncOldValues={},t.asyncKeypaths={};var i=function(r){var i=[t.get(r),n[r],r],u=o[r],f=i[0]!==i[1],s=function(t,e,n){if(n.count)return n.count--,f};for(var c in u)e.fire({type:c,ns:l},i,s)};for(var u in n)i(u)},Ht.prototype.addComputed=function(e,n){var r,o,i,u=this,f=u.context,s=t,c=t;if(y(n))o=n.bind(f);else if(g(n)){var a=n;w(a.cache)&&(s=a.cache),w(a.sync)&&(c=a.sync),S(a.deps)||(r=a.deps),y(a.get)&&(o=a.get.bind(f)),y(a.set)&&(i=a.set.bind(f))}if(o){var p=new zt(e,c,s,r,u,o,i);return u.computed||(u.computed={}),u.computed[e]=p,p}},Ht.prototype.removeComputed=function(t){var e=this.computed;e&&bt(e,t)&&delete e[t]},Ht.prototype.watch=function(t,e,n){var o=this,i=o.context,u=o.syncEmitter,f=o.asyncEmitter,s=function(t,e){var n=e.sync?u:f,s={ns:l,listener:e.watcher,ctx:i,count:0};e.once&&(s.max=1),n.on(t,s),e.immediate&&e.watcher.call(i,o.get(t),r,t)};if(m(t))s(t,Ut(e,n));else for(var c in t)s(c,Ut(t[c]))},Ht.prototype.unwatch=function(t,e){var n={ns:l,listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},Ht.prototype.toggle=function(t){var e=!this.get(t);return this.set(t,e),e},Ht.prototype.increase=function(t,e,n){var r=Rt(this.get(t),0)+(e||1);if(!b(n)||r<=n)return this.set(t,r),r},Ht.prototype.decrease=function(t,e,n){var r=Rt(this.get(t),0)-(e||1);if(!b(n)||r>=n)return this.set(t,r),r},Ht.prototype.insert=function(n,r,o){var i=this.get(n),u=(i=d(i)?i.slice():[]).length;if(o===t||o===u)i.push(r);else if(o===e||0===o)i.unshift(r);else{if(!(o>0&&o<u))return;i.splice(o,0,r)}return this.set(n,i),t},Ht.prototype.append=function(e,n){return this.insert(e,n,t)},Ht.prototype.prepend=function(t,n){return this.insert(t,n,e)},Ht.prototype.removeAt=function(e,n){var r=this.get(e);if(d(r)&&n>=0&&n<r.length)return(r=r.slice()).splice(n,1),this.set(e,r),t},Ht.prototype.remove=function(e,n){var r=this.get(e);if(d(r)&&P(r=r.slice(),n))return this.set(e,r),t},Ht.prototype.copy=function(t,e){return gt(t,e)},Ht.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),t.data={}};var It=function(e){var n=this,o=e||a;n.$emitter=new _t(t),o.events&&n.on(o.events);var i=o.data,u=o.props;o.vnode,o.propTypes;var f=o.computed,s=o.methods,c=o.watchers,p=o.extensions;n.$options=o,p&&dt(n,p);var l=u?gt(u):{},v=n.$observer=new Ht(l,n,n.$nextTask=new Pt({afterTask:function(){n.$isDirty&&(n.$isDirty=r,n.update(n.render(),n.$vnode))}}));f&&yt(f,(function(t,e){v.addComputed(e,t)}));var h=y(i)?i.call(n,e):i;g(h)&&yt(h,(function(t,e){l[e]=t})),s&&yt(s,(function(t,e){n[e]=t})),c&&v.watch(c)};function Yt(t,e,n,r){var o=t.$emitter,i=o.toFilter(e,n),u={listener:i.listener,ns:i.ns,ctx:t};r&&(u.max=1),o.on(i.type,u)}function Mt(t,e,n,r){m(e)?Yt(t,e,n,r):yt(e,(function(e,n){Yt(t,n,e,r)}))}return It.define=function(t){return t},It.use=function(t){t.install(It)},It.nextTick=function(t,e){Pt.shared().append(t,e)},It.compile=function(t,e){return t},It.directive=function(t,e){},It.transition=function(t,e){},It.component=function(t,e){},It.partial=function(t,e){},It.filter=function(t,e){},It.prototype.get=function(t,e){return this.$observer.get(t,e)},It.prototype.set=function(t,e){var n=this.$observer;n&&n.set(t,e)},It.prototype.on=function(t,e){return Mt(this,t,e),this},It.prototype.once=function(e,n){return Mt(this,e,n,t),this},It.prototype.off=function(t,e){return this.$emitter.off(t,e),this},It.prototype.fire=function(e,n,o){var i,u=this,f=u.$emitter,s=u.$parent,c=u.$children;if(k.is(e))i=e;else if(m(e))i=new k(e);else{var a=e;(i=new k(a.type)).ns=a.ns}if(i.ns===r){var p=f.toEvent(i.type);i.type=p.type,i.ns=p.ns}i.target||(i.target=u);var l,v=[i];return g(n)?j(v,n):n===t&&(o=t),(l=o&&i.target===u?t:f.fire(i,v))&&(o?c&&(i.phase=k.PHASE_DOWNWARD,A(c,(function(e){return l=e.fire(i,n,t)}))):s&&(i.phase=k.PHASE_UPWARD,l=s.fire(i,n))),l},It.prototype.watch=function(t,e,n){return this.$observer.watch(t,e,n),this},It.prototype.unwatch=function(t,e){return this.$observer.unwatch(t,e),this},It.prototype.loadComponent=function(t,e){},It.prototype.createComponent=function(t,e){return this},It.prototype.directive=function(t,e){},It.prototype.transition=function(t,e){},It.prototype.component=function(t,e){},It.prototype.partial=function(t,e){},It.prototype.filter=function(t,e){},It.prototype.forceUpdate=function(t){},It.prototype.render=function(){},It.prototype.update=function(t,e){},It.prototype.checkProp=function(t,e){},It.prototype.destroy=function(){var t=this;t.$parent,t.$options;var e=t.$emitter;t.$observer.destroy(),e.off(),t.$el=r},It.prototype.nextTick=function(t){this.$nextTask.append(t,this)},It.prototype.toggle=function(t){return this.$observer.toggle(t)},It.prototype.increase=function(t,e,n){return this.$observer.increase(t,e,n)},It.prototype.decrease=function(t,e,n){return this.$observer.decrease(t,e,n)},It.prototype.insert=function(t,e,n){return this.$observer.insert(t,e,n)},It.prototype.append=function(t,e){return this.$observer.append(t,e)},It.prototype.prepend=function(t,e){return this.$observer.prepend(t,e)},It.prototype.removeAt=function(t,e){return this.$observer.removeAt(t,e)},It.prototype.remove=function(t,e){return this.$observer.remove(t,e)},It.prototype.copy=function(t,e){return this.$observer.copy(t,e)},It.version="1.0.0-alpha.230",It.is=E,It.array=N,It.object=wt,It.string=nt,It.logger=Ot,It.Event=k,It.Emitter=_t,It.config=h,It}));
//# sourceMappingURL=yox.min.js.map
