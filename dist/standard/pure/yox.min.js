!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=n()}(this,(function(){"use strict";var t=!0,n=!1,e=null,r=void 0,i="undefined",o="function",u="length",s=".",f=typeof window!==i?window:r,a=function(){},c=Object.freeze({}),p=Object.freeze([]),h="",v=/yox/.test(a.toString())?2:3,l={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:n,minifyCompiled:n,logLevel:v};function y(t){return typeof t===o}function d(t){return Array.isArray(t)}function g(t){return t!==e&&"object"==typeof t}function m(t){return"string"==typeof t}function w(t){return"number"==typeof t&&!isNaN(t)}function b(e){return e===t||e===n}function x(t){return!isNaN(t-parseFloat(t))}var E=Object.freeze({__proto__:null,func:y,array:d,object:g,string:m,number:w,boolean:b,numeric:x});function $(t,n,e){return d(e)?t.apply(n,e):n!==r?t.call(n,e):e!==r?t(e):t()}var k=function(t,n){this.type=t,this.phase=k.PHASE_CURRENT,n&&(this.originalEvent=n)};function A(t,e,r){var i=t.length;if(i)if(r)for(var o=i-1;o>=0&&e(t[o],o)!==n;o--);else for(var u=0;u<i&&e(t[u],u)!==n;u++);}function O(t,n){t[t.length]=n}function D(t,n){t.unshift(n)}function _(t,n,e){d(n)?A(n,(function(n){e(t,n)})):e(t,n)}function C(t,n){_(t,n,O)}function T(t,n){_(t,n,D)}function j(t,e,r){var i=-1;return A(t,(function(t,o){if(r===n?t==e:t===e)return i=o,n})),i}function P(e,r,i){var o=0;return A(e,(function(t,u){(i===n?t==r:t===r)&&(e.splice(u,1),o++)}),t),o}function S(t,n,e){return j(t,n,e)>=0}function R(t,n,e){var r={};return A(t,(function(t){r[n?t[n]:t]=e||t})),r}function z(t,n){return t.join(n)}function N(t){return!d(t)||!t.length}k.is=function(t){return t instanceof k},k.prototype.preventDefault=function(){var n=this;if(!n.isPrevented){var e=n.originalEvent;e&&e.preventDefault(),n.isPrevented=t}return n},k.prototype.stopPropagation=function(){var n=this;if(!n.isStoped){var e=n.originalEvent;e&&e.stopPropagation(),n.isStoped=t}return n},k.prototype.prevent=function(){return this.preventDefault()},k.prototype.stop=function(){return this.stopPropagation()},k.PHASE_CURRENT=0,k.PHASE_UPWARD=1,k.PHASE_DOWNWARD=-1;var W=Object.freeze({__proto__:null,each:A,push:C,unshift:T,indexOf:j,last:function(t){var n=t.length;if(n>0)return t[n-1]},pop:function(t){if(t.length>0)return t.pop()},remove:P,has:S,toArray:function(t){return d(t)?t:$(p.slice,t)},toObject:R,join:z,falsy:N});function F(t){return y(t)&&function(t,n){return t!=e&&t.toString?t.toString():n!==r?n:h}(t).indexOf("[native code]")>=0}var U=function(){var t=Object.create(e);return{get:function(n){return t[n]},set:function(n,e){t[n]=e},has:function(n){return n in t},keys:function(){return Object.keys(t)}}};function H(t){var n=U();return function(e){var i=n.get(e);if(i!==r)return i;var o=t(e);return n.set(e,o),o}}function I(t){var n=U();return function(e,r){var i=n.get(e);if(i){var o=i.get(r);if(o)return o}else i=U(),n.set(e,i);var u=t(e,r);return i.set(r,u),u}}var Y=/-([a-z])/gi,M=/\B([A-Z])/g,K=/^[a-z]/,L=H((function(t){return t.replace(Y,(function(t,n){return X(n)}))})),V=H((function(t){return t.replace(M,(function(t,n){return"-"+tt(n)}))})),B=H((function(t){return t.replace(K,X)}));function G(t,n,e){return w(e)?n===e?h:t.slice(n,e):t.slice(n)}function Z(t,n,e){return t.indexOf(n,e!==r?e:0)}function q(t,n,e){return t.lastIndexOf(n,e!==r?e:t.length)}function J(t,n){return 0===Z(t,n)}function Q(t,n){return t.charCodeAt(n||0)}function X(t){return t.toUpperCase()}function tt(t){return t.toLowerCase()}function nt(t,n){return Z(t,n)>=0}function et(t){return!m(t)||!t.length}var rt=Object.freeze({__proto__:null,camelize:L,hyphenate:V,capitalize:B,repeat:function(t,n){return z(new Array(n+1),t)},trim:function(t){return et(t)?h:t.trim()},slice:G,indexOf:Z,lastIndexOf:q,startsWith:J,endsWith:function(t,n){var e=t.length-n.length;return e>=0&&q(t,n)===e},charAt:function(t,n){return t.charAt(n||0)},codeAt:Q,upper:X,lower:tt,has:nt,falsy:et}),it=/\./g,ot=/\*/g,ut=/\*\*/g,st=I((function(t,n){return t===n||J(t,n+=s)?n.length:-1})),ft=H((function(t){return Z(t,s)<0?[t]:t.split(s)}));function at(t,e){for(var r=ft(t),i=0,o=r.length-1;i<=o&&e(r[i],i,o)!==n;i++);}var ct=I((function(t,n){return t&&n?t+s+n:t||n})),pt=H((function(t){return nt(t,"*")})),ht=H((function(t){return new RegExp("^"+t.replace(it,"\\.").replace(ot,"(\\w+)").replace(ut,"([.\\w]+?)")+"$")})),vt=I((function(t,n){var e=t.match(ht(n));return e?e[1]:r})),lt={value:r};function yt(t){return Object.keys(t)}function dt(t,e){for(var r in t)if(e(t[r],r)===n)break}function gt(t,n){return dt(n,(function(n,e){t[e]=n})),t}function mt(t,n){var e=t;return d(t)?n?(e=[],A(t,(function(t,r){e[r]=mt(t,n)}))):e=t.slice():g(t)&&(e={},dt(t,(function(t,r){e[r]=n?mt(t,n):t}))),e}function wt(t){return y(t.get)?t.get():t}function bt(t,i,o){var u=t;return at(i,(function(t,i,s){if(u==e)return u=r,n;var f=u[t],a=f!==r;f&&(f=(o||wt)(f)),i===s?a?(lt.value=f,u=lt):u=r:u=f})),u}var xt=Object.freeze({__proto__:null,keys:yt,each:dt,extend:gt,merge:function(t,n){return t&&n?gt(gt({},t),n):t||n},copy:mt,get:bt,set:function(t,e,r,i){var o=t;at(e,(function(t,e,u){if(e===u)o[t]=r;else if(o[t])o=o[t];else{if(!i)return n;o=o[t]={}}}))},has:function(t,n){return t[n]!==r},falsy:function(t){return!g(t)||d(t)||!yt(t).length}}),Et=typeof console!==i?console:e,$t=f&&/edge|msie|trident/i.test(f.navigator.userAgent)?h:"%c",kt=Et?$t?function(t,n,e){Et.log($t+t,e,n)}:function(t,n){Et.log(t,n)}:a;function At(){var t=l.logLevel;return t>=1&&t<=5?t:v}function Ot(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var Dt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,n){At()<=1&&kt(n||"Yox debug",t,Ot("#999"))},info:function(t,n){At()<=2&&kt(n||"Yox info",t,Ot("#2db7f5"))},warn:function(t,n){At()<=3&&kt(n||"Yox warn",t,Ot("#f90"))},error:function(t,n){At()<=4&&kt(n||"Yox error",t,Ot("#ed4014"))},fatal:function(t,n){if(At()<=5)throw new Error("["+(n||"Yox fatal")+"]: "+t)}}),_t=function(t){this.ns=t||n,this.listeners={}};function Ct(n,e){return n?n===e.listener:t}function Tt(n,e){var r=e.ns;return r&&n?r===n:t}_t.prototype.fire=function(e,i,o){var u=this,s=m(e)?u.toEvent(e):e,f=u.listeners[s.type],a=t;if(f){f=f.slice();for(var c=i&&k.is(i[0])?i[0]:r,p=0,h=f.length;p<h;p++){var v=f[p];if(Tt(s.ns,v)&&S(f,v)&&(!o||o(s,i,v))){var l=$(v.listener,v.ctx,i);if(v.num=v.num?v.num+1:1,v.num===v.max&&u.off(s.type,{ns:s.ns,listener:v.listener}),c&&(l===n?c.prevent().stop():c.isStoped&&(l=n)),l===n){a=n;break}}}}return a},_t.prototype.on=function(t,n){var e=this.listeners,r=y(n)?{listener:n}:n;if(g(r)&&y(r.listener)){if(!m(r.ns)){var i=this.toEvent(t);r.ns=i.ns,t=i.type}C(e[t]||(e[t]=[]),r)}},_t.prototype.off=function(n,e){var r=this,i=r.listeners;if(n){var o=r.toFilter(n,e),u=function(n,e){A(n,(function(t,e){Ct(o.listener,t)&&Tt(o.ns,t)&&n.splice(e,1)}),t),n.length||delete i[e]};o.type?i[o.type]&&u(i[o.type],o.type):o.ns&&dt(i,u)}else r.listeners={}},_t.prototype.has=function(e,r){var i=this.listeners,o=this.toFilter(e,r),u=t,s=function(t){return A(t,(function(t){if(Ct(o.listener,t)&&Tt(o.ns,t))return u=n})),u};return o.type?i[o.type]&&s(i[o.type]):o.ns&&dt(i,s),!u},_t.prototype.toEvent=function(t){var n={type:t,ns:h};if(this.ns){var e=Z(t,s);e>=0&&(n.type=G(t,0,e),n.ns=G(t,e+1))}return n},_t.prototype.toFilter=function(t,n){var e;if(m((e=n?y(n)?{listener:n}:n:{}).ns))e.type=t;else{var r=this.toEvent(t);e.type=r.type,e.ns=r.ns}return e},typeof setImmediate===o&&F(setImmediate)&&setImmediate;var jt,Pt=typeof MessageChannel===o&&F(MessageChannel)?function(t){var n=new MessageChannel;n.port1.onmessage=t,n.port2.postMessage(1)}:setTimeout,St=function(t){this.tasks=[],this.hooks=t||c};St.shared=function(){return jt||(jt=new St)},St.prototype.append=function(t,n){var e=this,r=e.tasks;C(r,{fn:t,ctx:n}),1===r.length&&Pt((function(){e.run()}))},St.prototype.prepend=function(t,n){var e=this,r=e.tasks;T(r,{fn:t,ctx:n}),1===r.length&&Pt((function(){e.run()}))},St.prototype.clear=function(){this.tasks.length=0},St.prototype.run=function(){var t=this,n=t.tasks,e=t.hooks,r=n.length;if(r){t.tasks=[],e.beforeTask&&e.beforeTask();for(var i=0;i<r;i++)$(n[i].fn,n[i].ctx);e.afterTask&&e.afterTask()}};function Rt(t){var n=t.input,e=t.getter;t.value=n?e.apply(r,n):e()}var zt=function(){this.map={},this.list=[]};zt.prototype.add=function(t,n){var e=this.map[t.id]||(this.map[t.id]={});e[n]||(e[n]=t,this.list.push([t,n]))},zt.prototype.watch=function(t){var n=this.list;if(n)for(var e=0,r=n.length;e<r;e++)n[e][0].watch(n[e][1],t)},zt.prototype.unwatch=function(t){var n=this.list;if(n)for(var e=0,r=n.length;e<r;e++)n[e][0].unwatch(n[e][1],t)};var Nt=function(t,n,e,r,i,o,u,s){var f=this;f.status=1,f.keypath=t,f.cache=n,f.input=r,f.output=i,f.setter=u,f.getter=o,f.onChange=s,f.watcherOptions={sync:e,watcher:function(){f.refresh()}}};function Wt(t,n){return x(t)?+t:n!==r?n:0}function Ft(t,n){if(t==e||n===h)return t;var r=bt(t,n);return r?r.value:void 0}function Ut(n,e,i,o,s,f){var a=function(t,e,i){if(e!==i){for(var u=ct(n,t),a=0;a<s;a++){var c=o[a];vt(u,c)!==r&&f(c,u,e,i)}Ut(u,e,i,o,s,f)}};(function(n,e,i){var o=m(n),s=m(e);if(o||s)return i(u,o?n.length:r,s?e.length:r),t})(e,i,a)||function(n,e,i){var o=d(n),s=d(e);if(o||s){var f=o?n.length:r,a=s?e.length:r;i(u,f,a);for(var c=0,p=Math.max(f||0,a||0);c<p;c++)i(h+c,o?n[c]:r,s?e[c]:r);return t}}(e,i,a)||function(n,e,i){var o=g(n),u=g(e);if(o||u){var s=U(),f=o?n:c,a=u?e:c;if(o)for(var p in f){var h=f[p];h!==a[p]&&(s.set(p,t),i(p,h,a[p]))}if(u)for(var v in a){var l=a[v];s.get(v)===r&&l!==f[v]&&i(v,f[v],l)}}}(e,i,a)}function Ht(t,n,e,i,o,u){var s;for(var f in i)if(pt(f))vt(t,f)!==r?u(f,t,n,e):o&&(s?s.push(f):s=[f]);else{var a=st(f,t);if(a>=0){var c=G(f,a),p=Ft(n,c),h=Ft(e,c);p!==h&&u(f,f,p,h)}}s&&Ut(t,n,e,s,s.length,u)}Nt.prototype.get=function(){var t=this,n=t.status,e=t.watcherOptions;if(t.cache){if(2!==n)if(t.staticDeps)Rt(t);else{var i=t.dynamicDeps;i&&i.unwatch(e.watcher),t.dynamicDeps=r;var o=Nt.current;Nt.current=t,Rt(t),Nt.current=o,(i=t.dynamicDeps)&&i.watch(e)}}else Rt(t);return 2!==n&&(t.status=2),function(t){var n=t.value,e=t.output;return e?e(n):n}(t)},Nt.prototype.set=function(t){var n=this.setter;n?n(t):y(t)&&(this.getter=t,this.refresh())},Nt.prototype.refresh=function(){var t=this.value;this.status=3;var n=this.get();n!==t&&this.onChange(this.keypath,n,t)},Nt.prototype.addStaticDeps=function(t,n){for(var e=this.staticDeps||(this.staticDeps=new zt),r=0,i=n.length;r<i;r++)e.add(t,n[r]);e.watch(this.watcherOptions)},Nt.prototype.addDynamicDep=function(t,n){(this.dynamicDeps||(this.dynamicDeps=new zt)).add(t,n)};var It={watcher:a};function Yt(n,e){return y(n)?(It.watcher=n,It.immediate=e===t,It):n}var Mt=0,Kt=function(t,n,e){var r=this;r.id=Mt++,r.data=t||{},r.context=n||r,r.nextTask=e||new St,r.syncEmitter=new _t,r.asyncEmitter=new _t,r.asyncOldValues={},r.asyncKeypaths={},r.onComputedChange=function(t,n,e){r.diff(t,n,e)}};Kt.prototype.get=function(t,n,e){var r=this.data,i=Nt.current;if(t===h)return r;i&&!e&&i.addDynamicDep(this,t);var o=bt(r,t);return o?o.value:n},Kt.prototype.set=function(t,n){var e=this,r=e.data,i=function(t,n){var i,o=e.get(t);n!==o&&(at(t,(function(t,e,o){if(0!==e)i&&(e===o?i[t]=n:i=i[t]||(i[t]={}));else{var u=r[t];u&&u instanceof Nt?0===o?u.set(n):i=u.get():0===o?r[t]=n:i=r[t]||(r[t]={})}})),e.diff(t,n,o))};if(m(t))i(t,n);else if(g(t))for(var o in t)i(o,t[o])},Kt.prototype.diff=function(n,e,r){var i=this,o=i.syncEmitter,u=i.asyncEmitter,s=i.asyncOldValues,f=i.asyncKeypaths,a=36!==Q(n);Ht(n,e,r,o.listeners,a,(function(t,n,e,r){o.fire({type:t,ns:h},[e,r,n])})),Ht(n,e,r,u.listeners,a,(function(n,e,r,o){for(var a=u.listeners[n],c=0,p=a.length;c<p;c++)a[c].count++;f[e]||(s[e]=o,f[e]={}),f[e][n]=t,i.pending||(i.pending=t,i.nextTask.append((function(){i.pending&&i.diffAsync()})))}))},Kt.prototype.diffAsync=function(){var t=this,n=t.asyncEmitter,e=t.asyncOldValues,i=t.asyncKeypaths;t.pending=r,t.asyncOldValues={},t.asyncKeypaths={};var o=function(r){var o=[t.get(r),e[r],r],u=i[r],s=o[0]!==o[1],f=function(t,n,e){if(e.count)return e.count--,s};for(var a in u)n.fire({type:a,ns:h},o,f)};for(var u in e)o(u)},Kt.prototype.addComputed=function(n,e){var r,i,o,u,s,f=this,a=f.context,c=t,p=t;if(y(e))o=e.bind(a);else if(g(e)){var h=e;b(h.cache)&&(c=h.cache),b(h.sync)&&(p=h.sync),d(h.deps)&&(r=h.deps),N(h.input)||(i=h.input),y(h.output)&&(s=h.output),y(h.get)&&(o=h.get.bind(a)),y(h.set)&&(u=h.set.bind(a))}if(o){var v=new Nt(n,c,p,i,s,o,u,f.onComputedChange);return c&&r&&v.addStaticDeps(f,r),f.data[n]=v}},Kt.prototype.removeComputed=function(t){delete this.data[t]},Kt.prototype.watch=function(t,n,e){var i=this,o=i.context,u=i.syncEmitter,s=i.asyncEmitter,f=function(t,n){var e=n.sync?u:s,f={ns:h,listener:n.watcher,ctx:o,count:0};n.once&&(f.max=1),e.on(t,f),n.immediate&&n.watcher.call(o,i.get(t),r,t)};if(m(t))f(t,Yt(n,e));else for(var a in t)f(a,Yt(t[a]))},Kt.prototype.unwatch=function(t,n){this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},Kt.prototype.toggle=function(t){var n=!this.get(t);return this.set(t,n),n},Kt.prototype.increase=function(t,n,e){var r=Wt(this.get(t),0)+(n||1);if(!w(e)||r<=e)return this.set(t,r),r},Kt.prototype.decrease=function(t,n,e){var r=Wt(this.get(t),0)-(n||1);if(!w(e)||r>=e)return this.set(t,r),r},Kt.prototype.insert=function(e,r,i){var o=this.get(e),u=(o=d(o)?o.slice():[]).length;if(i===t||i===u)o.push(r);else if(i===n||0===i)o.unshift(r);else{if(!(i>0&&i<u))return;o.splice(i,0,r)}return this.set(e,o),t},Kt.prototype.append=function(n,e){return this.insert(n,e,t)},Kt.prototype.prepend=function(t,e){return this.insert(t,e,n)},Kt.prototype.removeAt=function(n,e){var r=this.get(n);if(d(r)&&e>=0&&e<r.length)return(r=r.slice()).splice(e,1),this.set(n,r),t},Kt.prototype.remove=function(n,e){var r=this.get(n);if(d(r)&&P(r=r.slice(),e))return this.set(n,r),t},Kt.prototype.copy=function(t,n){return mt(t,n)},Kt.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),t.data={}};var Lt=function(n){var e=this,r=n||c;e.$emitter=new _t(t),r.events&&e.on(r.events);var i=r.data,o=r.props;r.vnode,r.propTypes;var u=r.computed,s=r.methods,f=r.watchers,a=r.extensions;e.$options=r,a&&gt(e,a);var p=o?mt(o):{},h=e.$observer=new Kt(p,e,e.$nextTask=new St);u&&dt(u,(function(t,n){h.addComputed(n,t)}));var v=y(i)?i.call(e,n):i;g(v)&&dt(v,(function(t,n){p[n]=t})),s&&dt(s,(function(t,n){e[n]=t})),f&&h.watch(f)};Lt.define=function(t){return t},Lt.use=function(t){t.install(Lt)},Lt.nextTick=function(t,n){St.shared().append(t,n)},Lt.compile=function(t,n){return t},Lt.directive=function(t,n){},Lt.transition=function(t,n){},Lt.component=function(t,n){},Lt.filter=function(t,n){},Lt.method=function(t,n){if(m(t)&&!n)return Vt[t];!function(t,n,e,r){m(n)?Bt(t,n,e,r):dt(n,(function(n,e){Bt(t,e,n,r)}))}(Vt,t,n)},Lt.prototype.get=function(t,n){return this.$observer.get(t,n)},Lt.prototype.set=function(t,n){var e=this.$observer;e&&e.set(t,n)},Lt.prototype.on=function(t,n){return Zt(this,t,n),this},Lt.prototype.once=function(n,e){return Zt(this,n,e,t),this},Lt.prototype.off=function(t,n){return this.$emitter.off(t,n),this},Lt.prototype.fire=function(n,e,i){var o,u=this,s=u.$emitter,f=u.$parent,a=u.$children;if(k.is(n))o=n;else if(m(n))o=new k(n);else{var c=n;(o=new k(c.type)).ns=c.ns}if(o.ns===r){var p=s.toEvent(o.type);o.type=p.type,o.ns=p.ns}o.target||(o.target=u);var h,v=[o];return g(e)?C(v,e):e===t&&(i=t),(h=i&&o.target===u?t:s.fire(o,v))&&(i?a&&(o.phase=k.PHASE_DOWNWARD,A(a,(function(n){return h=n.fire(o,e,t)}))):f&&(o.phase=k.PHASE_UPWARD,h=f.fire(o,e))),h},Lt.prototype.watch=function(t,n,e){return this.$observer.watch(t,n,e),this},Lt.prototype.unwatch=function(t,n){return this.$observer.unwatch(t,n),this},Lt.prototype.loadComponent=function(t,n){},Lt.prototype.createComponent=function(t,n){return this},Lt.prototype.directive=function(t,n){},Lt.prototype.transition=function(t,n){},Lt.prototype.component=function(t,n){},Lt.prototype.filter=function(t,n){},Lt.prototype.forceUpdate=function(t){},Lt.prototype.render=function(){},Lt.prototype.update=function(t,n){},Lt.prototype.checkProp=function(t,n){},Lt.prototype.destroy=function(){var t=this;t.$parent,t.$options;var n=t.$emitter;t.$observer.destroy(),n.off(),t.$el=r},Lt.prototype.nextTick=function(t){this.$nextTask.append(t,this)},Lt.prototype.toggle=function(t){return this.$observer.toggle(t)},Lt.prototype.increase=function(t,n,e){return this.$observer.increase(t,n,e)},Lt.prototype.decrease=function(t,n,e){return this.$observer.decrease(t,n,e)},Lt.prototype.insert=function(t,n,e){return this.$observer.insert(t,n,e)},Lt.prototype.append=function(t,n){return this.$observer.append(t,n)},Lt.prototype.prepend=function(t,n){return this.$observer.prepend(t,n)},Lt.prototype.removeAt=function(t,n){return this.$observer.removeAt(t,n)},Lt.prototype.remove=function(t,n){return this.$observer.remove(t,n)},Lt.prototype.copy=function(t,n){return this.$observer.copy(t,n)},Lt.version="1.0.0-alpha.400",Lt.is=E,Lt.array=W,Lt.object=xt,Lt.string=rt,Lt.logger=Dt,Lt.Event=k,Lt.Emitter=_t,Lt.config=l;var Vt=Lt.prototype;function Bt(t,n,e,r){r&&r.format&&(e=r.format(e)),t[n]=e}function Gt(t,n,e){t.$emitter.on(n.type,{listener:n.listener,ns:n.ns,max:e?1:-1,ctx:t})}function Zt(t,n,e,r){var i=t.$emitter;m(n)?Gt(t,i.toFilter(n,e),r):d(n)?A(n,(function(n){Gt(t,n,r)})):dt(n,(function(n,e){Gt(t,i.toFilter(e,n),r)}))}return R(yt(Vt)),Lt}));
//# sourceMappingURL=yox.min.js.map
