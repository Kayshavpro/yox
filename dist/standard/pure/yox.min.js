!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=e()}(this,(function(){"use strict";var t=!0,e=!1,n=null,r=void 0,o="undefined",i="function",u=".",s=typeof window!==o?window:r,a=function(){},f=Object.freeze({}),c=Object.freeze([]),p="",l=/yox/.test(a.toString())?2:3,v={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:e,minifyCompiled:e,logLevel:l};function h(t){return typeof t===i}function y(t){return Array.isArray(t)}function d(t){return t!==n&&"object"==typeof t}function g(t){return"string"==typeof t}function m(t){return"number"==typeof t&&!isNaN(t)}function b(t){return"boolean"==typeof t}function w(t){return m(t)||g(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var x=Object.freeze({__proto__:null,func:h,array:y,object:d,string:g,number:m,boolean:b,numeric:w});function k(t,e,n){if(h(t))return y(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}var E=function(t,e){this.type=t,this.phase=E.PHASE_CURRENT,e&&(this.originalEvent=e)};function $(t,n,r){var o=t.length;if(o)if(r)for(var i=o-1;i>=0&&n(t[i],i)!==e;i--);else for(var u=0;u<o&&n(t[u],u)!==e;u++);}function O(t,e){t[t.length]=e}function A(t,e){t.unshift(e)}function _(t,e,n){y(e)?$(e,(function(e){n(t,e)})):n(t,e)}function T(t,e){_(t,e,O)}function j(t,e){_(t,e,A)}function C(t,n,r){var o=-1;return $(t,(function(t,i){if(r===e?t==n:t===n)return o=i,e})),o}function P(n,r,o){var i=0;return $(n,(function(t,u){(o===e?t==r:t===r)&&(n.splice(u,1),i++)}),t),i}function z(t,e,n){return C(t,e,n)>=0}function D(t,e){return t.join(e)}function R(t){return!y(t)||!t.length}E.is=function(t){return t instanceof E},E.prototype.preventDefault=function(){var e=this;if(!e.isPrevented){var n=e.originalEvent;n&&n.preventDefault(),e.isPrevented=t}return e},E.prototype.stopPropagation=function(){var e=this;if(!e.isStoped){var n=e.originalEvent;n&&n.stopPropagation(),e.isStoped=t}return e},E.prototype.prevent=function(){return this.preventDefault()},E.prototype.stop=function(){return this.stopPropagation()},E.PHASE_CURRENT=0,E.PHASE_UPWARD=1,E.PHASE_DOWNWARD=-1;var S=Object.freeze({__proto__:null,each:$,push:T,unshift:j,indexOf:C,last:function(t){var e=t.length;if(e>0)return t[e-1]},pop:function(t){if(t.length>0)return t.pop()},remove:P,has:z,toArray:function(t){return y(t)?t:k(c.slice,t)},toObject:function(t,e,n){var r={};return $(t,(function(t){r[e?t[e]:t]=n||t})),r},join:D,falsy:R});function N(t){return h(t)&&function(t,e){return t!=n&&t.toString?t.toString():e!==r?e:p}(t).indexOf("[native code]")>=0}var W=function(){var t=Object.create(n);return{get:function(e){return t[e]},set:function(e,n){t[e]=n},has:function(e){return e in t},keys:function(){return Object.keys(t)}}};function F(t){var e=W();return function(n){var o=e.get(n);if(o!==r)return o;var i=t(n);return e.set(n,i),i}}function U(t){var e=W();return function(n,r){var o=e.get(n);if(o){var i=o.get(r);if(i)return i}else o=W(),e.set(n,o);var u=t(n,r);return o.set(r,u),u}}var H=/-([a-z])/gi,I=/\B([A-Z])/g,M=/^[a-z]/,Y=F((function(t){return t.replace(H,(function(t,e){return J(e)}))})),q=F((function(t){return t.replace(I,(function(t,e){return"-"+Q(e)}))})),K=F((function(t){return t.replace(M,J)}));function L(t,e,n){return m(n)?e===n?p:t.slice(e,n):t.slice(e)}function V(t,e,n){return t.indexOf(e,n!==r?n:0)}function B(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function G(t,e){return 0===V(t,e)}function Z(t,e){return t.charCodeAt(e||0)}function J(t){return t.toUpperCase()}function Q(t){return t.toLowerCase()}function X(t,e){return V(t,e)>=0}function tt(t){return!g(t)||!t.length}var et=Object.freeze({__proto__:null,camelize:Y,hyphenate:q,capitalize:K,repeat:function(t,e){return D(new Array(e+1),t)},trim:function(t){return tt(t)?p:t.trim()},slice:L,indexOf:V,lastIndexOf:B,startsWith:G,endsWith:function(t,e){var n=t.length-e.length;return n>=0&&B(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:Z,upper:J,lower:Q,has:X,falsy:tt}),nt=/\./g,rt=/\*/g,ot=/\*\*/g,it=U((function(t,e){return t===e||G(t,e+=u)?e.length:-1})),ut=F((function(t){return V(t,u)<0?[t]:t.split(u)}));function st(t,n){for(var r=g(t)?ut(t):t,o=0,i=r.length-1;o<=i&&n(r[o],o,i)!==e;o++);}var at=U((function(t,e){return t&&e?t+u+e:t||e})),ft=F((function(t){return X(t,"*")})),ct=F((function(t){return new RegExp("^"+t.replace(nt,"\\.").replace(rt,"(\\w+)").replace(ot,"([.\\w]+?)")+"$")})),pt=U((function(t,e){var n=t.match(ct(e));return n?n[1]:r})),lt={value:r};function vt(t){return Object.keys(t)}function ht(t,n){for(var r in t)if(n(t[r],r)===e)break}function yt(t){ht(t,(function(e,n){delete t[n]}))}function dt(t,e){return ht(e,(function(e,n){t[n]=e})),t}function gt(t,e){var n=t;return y(t)?e?(n=[],$(t,(function(t,r){n[r]=gt(t,e)}))):n=t.slice():d(t)&&(n={},ht(t,(function(t,r){n[r]=e?gt(t,e):t}))),n}function mt(t,o){var i=t;return st(o,(function(t,o,u){if(i==n)return i=r,e;var s=i[t],a=s!==r;s&&h(s.get)&&(s=s.get()),o===u?a?(lt.value=s,i=lt):i=r:i=s})),i}function bt(t,e){return t[e]!==r}var wt=Object.freeze({__proto__:null,keys:vt,each:ht,clear:yt,extend:dt,merge:function(t,e){return t&&e?dt(dt({},t),e):t||e},copy:gt,get:mt,set:function(t,n,r,o){var i=t;st(n,(function(t,n,u){if(n===u)i[t]=r;else if(i[t])i=i[t];else{if(!o)return e;i=i[t]={}}}))},has:bt,falsy:function(t){return!d(t)||y(t)||!vt(t).length}}),xt=typeof console!==o?console:n,kt=s&&/edge|msie|trident/i.test(s.navigator.userAgent)?p:"%c",Et=xt?kt?function(t,e,n){xt.log(kt+t,n,e)}:function(t,e){xt.log(t,e)}:a;function $t(){var t=v.logLevel;return t>=1&&t<=5?t:l}function Ot(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var At=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){$t()<=1&&Et(e||"Yox debug",t,Ot("#999"))},info:function(t,e){$t()<=2&&Et(e||"Yox info",t,Ot("#2db7f5"))},warn:function(t,e){$t()<=3&&Et(e||"Yox warn",t,Ot("#f90"))},error:function(t,e){$t()<=4&&Et(e||"Yox error",t,Ot("#ed4014"))},fatal:function(t,e){if($t()<=5)throw new Error("["+(e||"Yox fatal")+"]: "+t)}}),_t=function(t){this.ns=t||e,this.listeners={}};function Tt(e,n){return e?e===n.listener:t}function jt(e,n){var r=n.ns;return r&&e?r===e:t}_t.prototype.fire=function(n,o,i){var u=this,s=g(n)?u.toEvent(n):n,a=u.listeners[s.type],f=t;if(a){a=a.slice();for(var c=o&&E.is(o[0])?o[0]:r,p=0,l=a.length;p<l;p++){var v=a[p];if(jt(s.ns,v)&&z(a,v)&&(!i||i(s,o,v))){c&&(c.listener=v.listener);var h=k(v.listener,v.ctx,o);if(c&&(c.listener=r),v.num=v.num?v.num+1:1,v.num===v.max&&u.off(s.type,{ns:s.ns,listener:v.listener}),c&&(h===e?c.prevent().stop():c.isStoped&&(h=e)),h===e){f=e;break}}}}return f},_t.prototype.on=function(t,e){var n=this.listeners,r=h(e)?{listener:e}:e;if(d(r)&&h(r.listener)){if(!g(r.ns)){var o=this.toEvent(t);r.ns=o.ns,t=o.type}T(n[t]||(n[t]=[]),r)}},_t.prototype.off=function(e,n){var r=this,o=r.listeners;if(e){var i=r.toFilter(e,n),u=function(e,n){$(e,(function(t,n){Tt(i.listener,t)&&jt(i.ns,t)&&e.splice(n,1)}),t),e.length||delete o[n]};i.type?o[i.type]&&u(o[i.type],i.type):i.ns&&ht(o,u)}else r.listeners={}},_t.prototype.has=function(n,r){var o=this.listeners,i=this.toFilter(n,r),u=t,s=function(t){return $(t,(function(t){if(Tt(i.listener,t)&&jt(i.ns,t))return u=e})),u};return i.type?o[i.type]&&s(o[i.type]):i.ns&&ht(o,s),!u},_t.prototype.toEvent=function(t){var e={type:t,ns:p};if(this.ns){var n=V(t,u);n>=0&&(e.type=L(t,0,n),e.ns=L(t,n+1))}return e},_t.prototype.toFilter=function(t,e){var n;if(g((n=e?h(e)?{listener:e}:e:{}).ns))n.type=t;else{var r=this.toEvent(t);n.type=r.type,n.ns=r.ns}return n},typeof setImmediate===i&&N(setImmediate)&&setImmediate;var Ct,Pt=typeof MessageChannel===i&&N(MessageChannel)?function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout,zt=function(t){this.tasks=[],this.hooks=t||f};function Dt(e){var r=Object.create(n);return $(e.split(","),(function(e){r[e]=t})),r}function Rt(t,e){return w(t)?+t:e!==r?e:0}zt.shared=function(){return Ct||(Ct=new zt)},zt.prototype.append=function(t,e){var n=this,r=n.tasks;T(r,{fn:t,ctx:e}),1===r.length&&Pt((function(){n.run()}))},zt.prototype.prepend=function(t,e){var n=this,r=n.tasks;j(r,{fn:t,ctx:e}),1===r.length&&Pt((function(){n.run()}))},zt.prototype.clear=function(){this.tasks.length=0},zt.prototype.run=function(){var t=this,e=t.tasks,n=t.hooks,r=e.length;if(r){t.tasks=[],n.beforeTask&&n.beforeTask();for(var o=0;o<r;o++)k(e[o].fn,e[o].ctx);n.afterTask&&n.afterTask()}},Dt("area,base,embed,track,source,param,input,col,img,br,hr"),Dt("svg,g,defs,desc,metadata,symbol,use,image,path,rect,circle,line,ellipse,polyline,polygon,text,tspan,tref,textpath,marker,pattern,clippath,mask,filter,cursor,view,animate,font,font-face,glyph,missing-glyph,animateColor,animateMotion,animateTransform,textPath,foreignObject"),Dt("id,class,name,value,for,accesskey,title,style,src,type,href,target,alt,placeholder,preload,poster,wrap,accept,pattern,dir,autocomplete,autocapitalize,valign"),Dt("min,minlength,max,maxlength,step,size,rows,cols,tabindex,colspan,rowspan,frameborder"),Dt("disabled,checked,required,multiple,readonly,autofocus,autoplay,controls,loop,muted,novalidate,draggable,contenteditable,hidden,spellcheck");var St=function(e,n,r,o,i,u,s){var a=this;if(a.keypath=e,a.cache=r,a.deps=o,a.observer=i,a.getter=u,a.setter=s,a.watcherOptions={sync:n,watcher:a.watcher=function(n,r,o){var u=a.value,s=a.get(t);s!==u&&i.diff(e,s,u)}},o){a.fixed=t;for(var f=0,c=o.length;f<c;f++)i.watch(o[f],a.watcherOptions)}};function Nt(t,e){if(t==n||e===p)return t;var r=mt(t,e);return r?r.value:void 0}function Wt(e,n,o,i,u,s){var a=function(t,n,o){if(n!==o){for(var a=at(e,t),f=0;f<u;f++){var c=i[f];pt(a,c)!==r&&s(c,a,n,o)}Wt(a,n,o,i,u,s)}};(function(e,n,o){var i=g(e),u=g(n);if(i||u)return o("length",i?e.length:r,u?n.length:r),t})(n,o,a)||function(e,n,o){var i=y(e),u=y(n);if(i||u){var s=i?e.length:r,a=u?n.length:r;o("length",s,a);for(var f=0,c=Math.max(s||0,a||0);f<c;f++)o(p+f,i?e[f]:r,u?n[f]:r);return t}}(n,o,a)||function(e,n,o){var i=d(e),u=d(n);if(i||u){var s=W(),a=i?e:f,c=u?n:f;if(i)for(var p in a){var l=a[p];l!==c[p]&&(s.set(p,t),o(p,l,c[p]))}if(u)for(var v in c){var h=c[v];s.get(v)===r&&h!==a[v]&&o(v,a[v],h)}}}(n,o,a)}function Ft(t,e,n,o,i,u){var s;for(var a in o)if(ft(a))pt(t,a)!==r?u(a,t,e,n):i&&(s?s.push(a):s=[a]);else{var f=it(a,t);if(f>=0){var c=L(a,f),p=Nt(e,c),l=Nt(n,c);p!==l&&u(a,a,p,l)}}s&&Wt(t,e,n,s,s.length,u)}St.prototype.get=function(t){var e=this,n=e.getter,r=e.deps,o=e.observer,i=e.watcher,u=e.watcherOptions;if(e.cache){if(t||!bt(e,"value"))if(e.fixed)e.value=n();else{if(r)for(var s=r.length-1;s>=0;s--)o.unwatch(r[s],i);e.unique=W();var a=St.current;St.current=e,e.value=n();for(var f=e.unique.keys(),c=0,p=f.length;c<p;c++)o.watch(f[c],u);e.deps=f,St.current=a}}else e.value=n();return e.value},St.prototype.set=function(t){var e=this.setter;e&&e(t)},St.prototype.add=function(e){this.unique.set(e,t)};var Ut={watcher:a};function Ht(e,n){return h(e)?(Ut.watcher=e,Ut.immediate=n===t,Ut):e}var It=function(t,e,n){var r=this;r.data=t||{},r.context=e||r,r.nextTask=n||new zt,r.syncEmitter=new _t,r.asyncEmitter=new _t,r.asyncOldValues={},r.asyncKeypaths={}};It.prototype.get=function(t,e,n){var r,o=St.current,i=this.data,u=this.computed;return t===p?i:(o&&!n&&o.add(t),u&&(r=mt(u,t)),r||(r=mt(i,t)),r?r.value:e)},It.prototype.set=function(t,e){var n=this,r=n.data,o=n.computed,i=function(t,e){var i,u=n.get(t);e!==u&&(st(t,(function(t,n,u){0!==n?i&&(n===u?i[t]=e:i=i[t]||(i[t]={})):o&&o[t]?0===u?o[t].set(e):i=o[t].get():0===u?r[t]=e:i=r[t]||(r[t]={})})),n.diff(t,e,u))};if(g(t))i(t,e);else if(d(t))for(var u in t)i(u,t[u])},It.prototype.diff=function(e,n,r){var o=this,i=o.syncEmitter,u=o.asyncEmitter,s=o.asyncOldValues,a=o.asyncKeypaths,f=36!==Z(e);Ft(e,n,r,i.listeners,f,(function(t,e,n,r){i.fire({type:t,ns:p},[n,r,e])})),Ft(e,n,r,u.listeners,f,(function(e,n,r,i){for(var f=u.listeners[e],c=0,p=f.length;c<p;c++)f[c].count++;a[n]||(s[n]=i,a[n]={}),a[n][e]=t,o.pending||(o.pending=t,o.nextTask.append((function(){o.pending&&o.diffAsync()})))}))},It.prototype.diffAsync=function(){var t=this,e=t.asyncEmitter,n=t.asyncOldValues,o=t.asyncKeypaths;t.pending=r,t.asyncOldValues={},t.asyncKeypaths={};var i=function(r){var i=[t.get(r),n[r],r],u=o[r],s=i[0]!==i[1],a=function(t,e,n){if(n.count)return n.count--,s};for(var f in u)e.fire({type:f,ns:p},i,a)};for(var u in n)i(u)},It.prototype.addComputed=function(e,n){var r,o,i,u=this,s=u.context,a=t,f=t;if(h(n))o=n.bind(s);else if(d(n)){var c=n;b(c.cache)&&(a=c.cache),b(c.sync)&&(f=c.sync),R(c.deps)||(r=c.deps),h(c.get)&&(o=c.get.bind(s)),h(c.set)&&(i=c.set.bind(s))}if(o){var p=new St(e,f,a,r,u,o,i);return u.computed||(u.computed={}),u.computed[e]=p,p}},It.prototype.removeComputed=function(t){var e=this.computed;e&&bt(e,t)&&delete e[t]},It.prototype.watch=function(t,e,n){var o=this,i=o.context,u=o.syncEmitter,s=o.asyncEmitter,a=function(t,e){var n=e.sync?u:s,a={ns:p,listener:e.watcher,ctx:i,count:0};e.once&&(a.max=1),n.on(t,a),e.immediate&&k(e.watcher,i,[o.get(t),r,t])};if(g(t))a(t,Ht(e,n));else for(var f in t)a(f,Ht(t[f]))},It.prototype.unwatch=function(t,e){var n={ns:p,listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},It.prototype.toggle=function(t){var e=!this.get(t);return this.set(t,e),e},It.prototype.increase=function(t,e,n){var r=Rt(this.get(t),0)+(e||1);if(!m(n)||r<=n)return this.set(t,r),r},It.prototype.decrease=function(t,e,n){var r=Rt(this.get(t),0)-(e||1);if(!m(n)||r>=n)return this.set(t,r),r},It.prototype.insert=function(n,r,o){var i=this.get(n),u=(i=y(i)?i.slice():[]).length;if(o===t||o===u)i.push(r);else if(o===e||0===o)i.unshift(r);else{if(!(o>0&&o<u))return;i.splice(o,0,r)}return this.set(n,i),t},It.prototype.append=function(e,n){return this.insert(e,n,t)},It.prototype.prepend=function(t,n){return this.insert(t,n,e)},It.prototype.removeAt=function(e,n){var r=this.get(e);if(y(r)&&n>=0&&n<r.length)return(r=r.slice()).splice(n,1),this.set(e,r),t},It.prototype.remove=function(e,n){var r=this.get(e);if(y(r)&&P(r=r.slice(),n))return this.set(e,r),t},It.prototype.copy=function(t,e){return gt(t,e)},It.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),yt(t)};var Mt=function(e){var n=this,o=e||f;n.$emitter=new _t(t),o.events&&n.on(o.events);var i=o.data,u=o.props;o.vnode,o.propTypes;var s=o.computed,a=o.methods,c=o.watchers,p=o.extensions;n.$options=o,p&&dt(n,p);var l=u?gt(u):{},v=n.$observer=new It(l,n,n.$nextTask=new zt({afterTask:function(){n.$isDirty&&(n.$isDirty=r,n.update(n.render(),n.$vnode))}}));s&&ht(s,(function(t,e){v.addComputed(e,t)}));var y=h(i)?k(i,n,e):i;d(y)&&ht(y,(function(t,e){l[e]=t})),a&&ht(a,(function(t,e){n[e]=t})),c&&v.watch(c)};function Yt(t,e,n,r){var o=t.$emitter,i=o.toFilter(e,n),u={listener:i.listener,ns:i.ns,ctx:t};r&&(u.max=1),o.on(i.type,u)}function qt(t,e,n,r){g(e)?Yt(t,e,n,r):ht(e,(function(e,n){Yt(t,n,e,r)}))}return Mt.define=function(t){return t},Mt.use=function(t){t.install(Mt)},Mt.nextTick=function(t,e){zt.shared().append(t,e)},Mt.compile=function(t,e){return t},Mt.directive=function(t,e){},Mt.transition=function(t,e){},Mt.component=function(t,e){},Mt.partial=function(t,e){},Mt.filter=function(t,e){},Mt.prototype.get=function(t,e){return this.$observer.get(t,e)},Mt.prototype.set=function(t,e){var n=this.$observer;n&&n.set(t,e)},Mt.prototype.on=function(t,e){return qt(this,t,e),this},Mt.prototype.once=function(e,n){return qt(this,e,n,t),this},Mt.prototype.off=function(t,e){return this.$emitter.off(t,e),this},Mt.prototype.fire=function(e,n,o){var i,u=this,s=u.$emitter,a=u.$parent,f=u.$children;if(E.is(e))i=e;else if(g(e))i=new E(e);else{var c=e;(i=new E(c.type)).ns=c.ns}if(i.ns===r){var p=s.toEvent(i.type);i.type=p.type,i.ns=p.ns}i.target||(i.target=u);var l,v=[i];return d(n)?T(v,n):n===t&&(o=t),(l=o&&i.target===u?t:s.fire(i,v))&&(o?f&&(i.phase=E.PHASE_DOWNWARD,$(f,(function(e){return l=e.fire(i,n,t)}))):a&&(i.phase=E.PHASE_UPWARD,l=a.fire(i,n))),l},Mt.prototype.watch=function(t,e,n){return this.$observer.watch(t,e,n),this},Mt.prototype.unwatch=function(t,e){return this.$observer.unwatch(t,e),this},Mt.prototype.loadComponent=function(t,e){},Mt.prototype.createComponent=function(t,e){return this},Mt.prototype.directive=function(t,e){},Mt.prototype.transition=function(t,e){},Mt.prototype.component=function(t,e){},Mt.prototype.partial=function(t,e){},Mt.prototype.filter=function(t,e){},Mt.prototype.forceUpdate=function(t){},Mt.prototype.render=function(){},Mt.prototype.update=function(t,e){},Mt.prototype.checkProp=function(t,e){},Mt.prototype.destroy=function(){var t=this;t.$parent,t.$options;var e=t.$emitter;t.$observer.destroy(),e.off(),yt(t)},Mt.prototype.nextTick=function(t){this.$nextTask.append(t,this)},Mt.prototype.toggle=function(t){return this.$observer.toggle(t)},Mt.prototype.increase=function(t,e,n){return this.$observer.increase(t,e,n)},Mt.prototype.decrease=function(t,e,n){return this.$observer.decrease(t,e,n)},Mt.prototype.insert=function(t,e,n){return this.$observer.insert(t,e,n)},Mt.prototype.append=function(t,e){return this.$observer.append(t,e)},Mt.prototype.prepend=function(t,e){return this.$observer.prepend(t,e)},Mt.prototype.removeAt=function(t,e){return this.$observer.removeAt(t,e)},Mt.prototype.remove=function(t,e){return this.$observer.remove(t,e)},Mt.prototype.copy=function(t,e){return this.$observer.copy(t,e)},Mt.version="1.0.0-alpha.211",Mt.is=x,Mt.array=S,Mt.object=wt,Mt.string=et,Mt.logger=At,Mt.Event=E,Mt.Emitter=_t,Mt.config=v,Mt}));
//# sourceMappingURL=yox.min.js.map
