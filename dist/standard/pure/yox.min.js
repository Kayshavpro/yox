!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=n()}(this,(function(){"use strict";var t=!0,n=!1,e=null,r=void 0,o="undefined",i="length",u="function",s=".",c=typeof window!==o?window:r,f=typeof global!==o?global:c,a=function(){},p=Object.freeze({}),h=Object.freeze([]),l="";function v(t){return typeof t===u}function y(t){return Array.isArray(t)}function d(t){return t!==e&&"object"==typeof t}function g(t){return"string"==typeof t}function m(t){return"number"==typeof t&&!isNaN(t)}function b(t){return"boolean"==typeof t}function w(t){return m(t)||g(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var x=Object.freeze({__proto__:null,func:v,array:y,object:d,string:g,number:m,boolean:b,numeric:w});function E(t,n,e){if(v(t))return y(e)?t.apply(n,e):n!==r?t.call(n,e):e!==r?t(e):t()}var $=function(t,n){this.type=t,this.phase=$.PHASE_CURRENT,n&&(this.originalEvent=n)};function _(t,e,r){var o=t.length;if(o)if(r)for(var i=o-1;i>=0&&e(t[i],i)!==n;i--);else for(var u=0;u<o&&e(t[u],u)!==n;u++);}function A(t,n){t[t.length]=n}function O(t,n){t.unshift(n)}function k(t,n,e){y(n)?_(n,(function(n){e(t,n)})):e(t,n)}function C(t,n){k(t,n,A)}function j(t,n){k(t,n,O)}function P(t,e,r){var o=-1;return _(t,(function(t,i){if(r===n?t==e:t===e)return o=i,n})),o}function R(e,r,o){var i=0;return _(e,(function(t,u){(o===n?t==r:t===r)&&(e.splice(u,1),i++)}),t),i}function T(t,n,e){return P(t,n,e)>=0}function z(t){return!y(t)||!t.length}$.is=function(t){return t instanceof $},$.prototype.preventDefault=function(){var n=this;if(!n.isPrevented){var e=n.originalEvent;e&&e.preventDefault(),n.isPrevented=t}return n},$.prototype.stopPropagation=function(){var n=this;if(!n.isStoped){var e=n.originalEvent;e&&e.stopPropagation(),n.isStoped=t}return n},$.prototype.prevent=function(){return this.preventDefault()},$.prototype.stop=function(){return this.stopPropagation()},$.PHASE_CURRENT=0,$.PHASE_UPWARD=1,$.PHASE_DOWNWARD=-1;var S=Object.freeze({__proto__:null,each:_,push:C,unshift:j,indexOf:P,last:function(t){var n=t.length;if(n>0)return t[n-1]},pop:function(t){if(t.length>0)return t.pop()},remove:R,has:T,toArray:function(t){return y(t)?t:E(h.slice,t)},toObject:function(t,n,e){var r={};return _(t,(function(t){r[n?t[n]:t]=e||t})),r},join:function(t,n){return t.join(n)},falsy:z}),D=/-([a-z])/gi,N=/\B([A-Z])/g,W=/^[a-z]/,F={},U={},Y={};function H(t,n,e){return m(e)?n===e?l:t.slice(n,e):t.slice(n)}function I(t,n,e){return t.indexOf(n,e!==r?e:0)}function L(t,n,e){return t.lastIndexOf(n,e!==r?e:t.length)}function M(t,n){return 0===I(t,n)}function q(t,n){return t.charCodeAt(n||0)}function B(t){return t.toUpperCase()}function G(t){return t.toLowerCase()}function V(t,n){return I(t,n)>=0}function X(t){return!g(t)||!t.length}var Z=Object.freeze({__proto__:null,camelize:function(t){return F[t]||(F[t]=t.replace(D,(function(t,n){return B(n)}))),F[t]},hyphenate:function(t){return U[t]||(U[t]=t.replace(N,(function(t,n){return"-"+G(n)}))),U[t]},capitalize:function(t){return Y[t]||(Y[t]=t.replace(W,B)),Y[t]},trim:function(t){return X(t)?l:t.trim()},slice:H,indexOf:I,lastIndexOf:L,startsWith:M,endsWith:function(t,n){var e=t.length-n.length;return e>=0&&L(t,n)===e},charAt:function(t,n){return t.charAt(n||0)},codeAt:q,upper:B,lower:G,has:V,falsy:X}),J=/\./g,K=/\*/g,Q=/\*\*/g,tt={},nt={};function et(t,e){var r;y(tt[t])?r=tt[t]:(r=I(t,s)<0?[t]:t.split(s),tt[t]=r);for(var o=0,i=r.length-1;o<=i&&e(r[o],o,i)!==n;o++);}function rt(t,n){var e=nt[n];if(!e){var r=n.replace(J,"\\.").replace(K,"(\\w+)").replace(Q,"([.\\w]+?)");e=nt[n]=new RegExp("^"+r+"$")}var o=t.match(e);if(o)return o[1]}var ot={value:r};function it(t){return Object.keys(t)}function ut(t,e){for(var r in t)if(e(t[r],r)===n)break}function st(t){ut(t,(function(n,e){delete t[e]}))}function ct(t,n){return ut(n,(function(n,e){t[e]=n})),t}function ft(t,n){var e=t;return y(t)?n?(e=[],_(t,(function(t,r){e[r]=ft(t,n)}))):e=t.slice():d(t)&&(e={},ut(t,(function(t,r){e[r]=n?ft(t,n):t}))),e}function at(t,o){return et(o,(function(o,i,u){if(t==e)return t=r,n;var s=t[o],c=s!==r;s&&v(s.get)&&(s=s.get()),i===u?c?(ot.value=s,t=ot):t=r:t=s})),t}function pt(t,n){return t[n]!==r}var ht=Object.freeze({__proto__:null,keys:it,each:ut,clear:st,extend:ct,merge:function(t,n){return t&&n?ct(ct({},t),n):t||n},copy:ft,get:at,set:function(t,e,r,o){et(e,(function(e,i,u){if(i===u)t[e]=r;else if(t[e])t=t[e];else{if(!o)return n;t=t[e]={}}}))},has:pt,falsy:function(t){return!d(t)||y(t)||!it(t).length}});function lt(t,n){return t!=e&&t.toString?t.toString():n!==r?n:l}var vt=typeof console!==o?console:e,yt=/yox/.test(lt(a))?2:3,dt=c&&/edge|msie|trident/i.test(c.navigator.userAgent)?l:"%c",gt=vt?dt?function(t,n,e){vt.log(dt+t,e,n)}:function(t,n){vt.log(t,n)}:a;function mt(){if(f){var t=f.YOX_LOG_LEVEL;if(t>=1&&t<=5)return t}return yt}function bt(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var wt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,n){mt()<=1&&gt(n||"Yox debug",t,bt("#999"))},info:function(t,n){mt()<=2&&gt(n||"Yox info",t,bt("#2db7f5"))},warn:function(t,n){mt()<=3&&gt(n||"Yox warn",t,bt("#f90"))},error:function(t,n){mt()<=4&&gt(n||"Yox error",t,bt("#ed4014"))},fatal:function(t,n){if(mt()<=5)throw new Error("["+(n||"Yox fatal")+"]: "+t)}}),xt=function(t){this.ns=t||n,this.listeners={}};function Et(n,e){return n?n===e.listener:t}function $t(n,e){var r=e.ns;return r&&n?r===n:t}function _t(t){return v(t)&&V(lt(t),"[native code]")}xt.prototype.fire=function(e,o,i){var u=this,s=g(e)?u.toEvent(e):e,c=u.listeners[s.type],f=t;if(c){c=c.slice();for(var a=o&&$.is(o[0])?o[0]:r,p=0,h=c.length;p<h;p++){var l=c[p];if($t(s.ns,l)&&T(c,l)&&(!i||i(s,o,l))){a&&(a.listener=l.listener);var v=E(l.listener,l.ctx,o);if(a&&(a.listener=r),l.num=l.num?l.num+1:1,l.num===l.max&&u.off(s.type,{ns:s.ns,listener:l.listener}),a&&(v===n?a.prevent().stop():a.isStoped&&(v=n)),v===n){f=n;break}}}}return f},xt.prototype.on=function(t,n){var e=this.listeners,r=v(n)?{listener:n}:n;if(d(r)&&v(r.listener)){if(!g(r.ns)){var o=this.toEvent(t);r.ns=o.ns,t=o.type}C(e[t]||(e[t]=[]),r)}},xt.prototype.off=function(n,e){var r=this,o=r.listeners;if(n){var i=r.toFilter(n,e),u=function(n,e){_(n,(function(t,e){Et(i.listener,t)&&$t(i.ns,t)&&n.splice(e,1)}),t),n.length||delete o[e]};i.type?o[i.type]&&u(o[i.type],i.type):i.ns&&ut(o,u)}else r.listeners={}},xt.prototype.has=function(e,r){var o=this.listeners,i=this.toFilter(e,r),u=t,s=function(t){return _(t,(function(t){if(Et(i.listener,t)&&$t(i.ns,t))return u=n})),u};return i.type?o[i.type]&&s(o[i.type]):i.ns&&ut(o,s),!u},xt.prototype.toEvent=function(t){var n={type:t,ns:l};if(this.ns){var e=I(t,s);e>=0&&(n.type=H(t,0,e),n.ns=H(t,e+1))}return n},xt.prototype.toFilter=function(t,n){var e;if(g((e=n?v(n)?{listener:n}:n:{}).ns))e.type=t;else{var r=this.toEvent(t);e.type=r.type,e.ns=r.ns}return e},typeof setImmediate===u&&_t(setImmediate)&&setImmediate;var At,Ot=typeof MessageChannel===u&&_t(MessageChannel)?function(t){var n=new MessageChannel;n.port1.onmessage=t,n.port2.postMessage(1)}:setTimeout,kt=function(){this.tasks=[]};function Ct(t,n){return w(t)?+t:n!==r?n:0}kt.shared=function(){return At||(At=new kt)},kt.prototype.append=function(t,n){var e=this,r=e.tasks;C(r,{fn:t,ctx:n}),1===r.length&&Ot((function(){e.run()}))},kt.prototype.prepend=function(t,n){var e=this,r=e.tasks;j(r,{fn:t,ctx:n}),1===r.length&&Ot((function(){e.run()}))},kt.prototype.clear=function(){this.tasks.length=0},kt.prototype.run=function(){var t=this.tasks;t.length&&(this.tasks=[],_(t,(function(t){E(t.fn,t.ctx)})))};var jt=function(n,e,r,o,i,u,s){var c=this;c.keypath=n,c.cache=r,c.deps=o,c.context=i.context,c.observer=i,c.getter=u,c.setter=s,c.unique={},c.watcher=function(e,r,o){var u=c.value,s=c.get(t);s!==u&&i.diff(n,s,u)},c.watcherOptions={sync:e,watcher:c.watcher},(c.fixed=!z(o))&&_(o,(function(t){i.watch(t,c.watcherOptions)}))};function Pt(t,n){if(t==e||n===l)return t;var r=at(t,n);return r?r.value:void 0}function Rt(n,e,o,u,c){var f=function(t,e,o){if(e!==o){var i=(a=t,(f=n)&&a?f+s+a:f||a);_(u,(function(t){rt(i,t)!==r&&c(t,i,e,o)})),Rt(i,e,o,u,c)}var f,a};(function(n,e,o){var u=g(n),s=g(e);if(u||s)return o(i,u?n.length:r,s?e.length:r),t})(e,o,f)||function(n,e,o){var u=y(n),s=y(e);if(u||s){var c=u?n.length:r,f=s?e.length:r;o(i,c,f);for(var a=0,p=Math.max(c||0,f||0);a<p;a++)o(""+a,n?n[a]:r,e?e[a]:r);return t}}(e,o,f)||function(t,n,e){var r=d(t),o=d(n);(r||o)&&(t=r?t:p,n=o?n:p,r&&ut(t,(function(t,r){t!==n[r]&&e(r,t,n[r])})),o&&ut(n,(function(n,r){n!==t[r]&&e(r,t[r],n)})))}(e,o,f)}function Tt(t,n,e,o,i,u){var c;ut(o,(function(o,f){if(function(t){return V(t,"*")}(f))rt(t,f)!==r?u(f,t,n,e):i&&(c?C(c,f):c=[f]);else{var a=function(t,n){return t===n||M(t,n+=s)?n.length:-1}(f,t);if(a>=0){var p=H(f,a),h=Pt(n,p),l=Pt(e,p);h!==l&&u(f,f,h,l)}}})),c&&Rt(t,n,e,c,u)}function zt(t,n,e){if(e.count&&n)return e.count--,n[0]!==n[1]}jt.prototype.get=function(t){var n=this,e=n.getter,r=n.context;if(n.cache){if(t||!pt(n,"value"))if(n.fixed)n.value=E(e,r);else{n.unbind();var o=jt.current;jt.current=n,n.value=E(e,r),n.bind(),jt.current=o}}else n.value=E(e,r);return n.value},jt.prototype.set=function(t){var n=this.setter,e=this.context;n&&n.call(e,t)},jt.prototype.add=function(n){this.unique[n]=t},jt.prototype.bind=function(){var t=this,n=t.unique,e=t.deps,r=t.observer,o=t.watcherOptions;ut(n,(function(t,n){C(e,n),r.watch(n,o)})),this.unique={}},jt.prototype.unbind=function(){var n=this,e=n.deps,r=n.observer,o=n.watcher;_(e,(function(t){r.unwatch(t,o)}),t),e.length=0};var St={watcher:a};function Dt(n,e){return v(n)?(St.watcher=n,St.immediate=e===t,St):n&&n.watcher?n:void 0}var Nt=function(t,n){var e=this;e.data=t||{},e.context=n||e,e.nextTask=new kt,e.syncEmitter=new xt,e.asyncEmitter=new xt,e.asyncChanges={}};Nt.prototype.get=function(t,n,e){var r,o=jt.current,i=this.data,u=this.computed;return t===l?i:(o&&!e&&o.add(t),u&&(r=at(u,t)),r||(r=at(i,t)),r?r.value:n)},Nt.prototype.set=function(t,n){var e=this,r=e.data,o=e.computed,i=function(t,n){var i,u=e.get(n);t!==u&&(et(n,(function(n,e,u){0!==e?i&&(e===u?i[n]=t:i=i[n]||(i[n]={})):o&&o[n]?0===u?o[n].set(t):i=o[n].get():0===u?r[n]=t:i=r[n]||(r[n]={})})),e.diff(n,t,u))};g(t)?i(n,t):d(t)&&ut(t,i)},Nt.prototype.diff=function(n,e,o){var i=this,u=i.syncEmitter,s=i.asyncEmitter,c=i.asyncChanges,f=36!==q(n);Tt(n,e,o,u.listeners,f,(function(t,n,e,r){u.fire({type:t,ns:l},[e,r,n])})),Tt(n,e,o,s.listeners,f,(function(n,e,o,u){_(s.listeners[n],(function(t){t.count++}));var f=(c[e]||(c[e]={value:u,keypaths:[]})).keypaths;T(f,n)||C(f,n),i.pending||(i.pending=t,i.nextTask.append((function(){i.pending&&(i.pending=r,i.diffAsync())})))}))},Nt.prototype.diffAsync=function(){var t=this,n=t.asyncEmitter,e=t.asyncChanges;t.asyncChanges={},ut(e,(function(e,r){var o=[t.get(r),e.value,r];_(e.keypaths,(function(t){n.fire({type:t,ns:l},o,zt)}))}))},Nt.prototype.addComputed=function(n,e){var r,o,i=t,u=t,s=[];if(v(e))r=e;else if(d(e)){var c=e;b(c.cache)&&(i=c.cache),b(c.sync)&&(u=c.sync),y(c.deps)&&(s=ft(c.deps)),v(c.get)&&(r=c.get),v(c.set)&&(o=c.set)}if(r){var f=this,a=new jt(n,u,i,s,f,r,o);return f.computed||(f.computed={}),f.computed[n]=a,a}},Nt.prototype.removeComputed=function(t){var n=this.computed;n&&pt(n,t)&&delete n[t]},Nt.prototype.watch=function(t,n,e){var o=this,i=o.context,u=o.syncEmitter,s=o.asyncEmitter,c=function(t,n){var e=n.sync?u:s,c={ns:l,listener:n.watcher,ctx:i,count:0};n.once&&(c.max=1),e.on(t,c),n.immediate&&E(n.watcher,i,[o.get(t),r,t])};g(t)?c(t,Dt(n,e)):ut(t,(function(t,n){c(n,Dt(t))}))},Nt.prototype.unwatch=function(t,n){var e={ns:l,listener:n};this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)},Nt.prototype.toggle=function(t){var n=!this.get(t);return this.set(t,n),n},Nt.prototype.increase=function(t,n,e){var r=Ct(this.get(t),0)+(n||1);if(!m(e)||r<=e)return this.set(t,r),r},Nt.prototype.decrease=function(t,n,e){var r=Ct(this.get(t),0)-(n||1);if(!m(e)||r>=e)return this.set(t,r),r},Nt.prototype.insert=function(e,r,o){var i=this.get(e),u=(i=y(i)?ft(i):[]).length;if(o===t||o===u)i.push(r);else if(o===n||0===o)i.unshift(r);else{if(!(o>0&&o<u))return;i.splice(o,0,r)}return this.set(e,i),t},Nt.prototype.append=function(n,e){return this.insert(n,e,t)},Nt.prototype.prepend=function(t,e){return this.insert(t,e,n)},Nt.prototype.removeAt=function(n,e){var r=this.get(n);if(y(r)&&e>=0&&e<r.length)return(r=ft(r)).splice(e,1),this.set(n,r),t},Nt.prototype.remove=function(n,e){var r=this.get(n);if(y(r)&&R(r=ft(r),e))return this.set(n,r),t},Nt.prototype.copy=function(t,n){return ft(t,n)},Nt.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),st(t)};var Wt=function(n){var e=this,r=n||p;e.$emitter=new xt(t),r.events&&e.on(r.events);var o=r.data,i=r.props,u=(r.vnode,r.propTypes,r.computed),s=r.methods,c=r.watchers,f=r.extensions;e.$options=r,f&&ct(e,f);var a=i?ft(i):{},h=e.$observer=new Nt(a,e);u&&ut(u,(function(t,n){h.addComputed(n,t)}));var l=v(o)?E(o,e,n):o;d(l)&&ut(l,(function(t,n){a[n]=t})),s&&ut(s,(function(t,n){e[n]=t})),c&&e.watch(c)};function Ft(t,n,e,r){var o=t.$emitter.toFilter(n,e),i={listener:o.listener,ns:o.ns,ctx:t};r&&(i.max=1),t.$emitter.on(o.type,i)}function Ut(t,n,e,r){g(n)?Ft(t,n,e,r):ut(n,(function(n,e){Ft(t,e,n,r)}))}return Wt.define=function(t){return t},Wt.use=function(t){t.install(Wt)},Wt.nextTick=function(t,n){kt.shared().append(t,n)},Wt.compile=function(t,n){return t},Wt.directive=function(t,n){},Wt.transition=function(t,n){},Wt.component=function(t,n){},Wt.partial=function(t,n){},Wt.filter=function(t,n){},Wt.prototype.get=function(t,n){return this.$observer.get(t,n)},Wt.prototype.set=function(t,n){var e=this.$observer;e&&e.set(t,n)},Wt.prototype.on=function(t,n){return Ut(this,t,n),this},Wt.prototype.once=function(n,e){return Ut(this,n,e,t),this},Wt.prototype.off=function(t,n){return this.$emitter.off(t,n),this},Wt.prototype.fire=function(n,e,o){var i,u=this,s=u.$emitter,c=u.$parent,f=u.$children;if($.is(n))i=n;else if(g(n))i=new $(n);else{var a=n;(i=new $(a.type)).ns=a.ns}if(i.ns===r){var p=s.toEvent(i.type);i.type=p.type,i.ns=p.ns}i.target||(i.target=u);var h,l=[i];return d(e)?C(l,e):e===t&&(o=t),(h=o&&i.target===u?t:s.fire(i,l))&&(o?f&&(i.phase=$.PHASE_DOWNWARD,_(f,(function(n){return h=n.fire(i,e,t)}))):c&&(i.phase=$.PHASE_UPWARD,h=c.fire(i,e))),h},Wt.prototype.watch=function(t,n,e){return this.$observer.watch(t,n,e),this},Wt.prototype.unwatch=function(t,n){return this.$observer.unwatch(t,n),this},Wt.prototype.loadComponent=function(t,n){},Wt.prototype.createComponent=function(t,n){return this},Wt.prototype.directive=function(t,n){},Wt.prototype.transition=function(t,n){},Wt.prototype.component=function(t,n){},Wt.prototype.partial=function(t,n){},Wt.prototype.filter=function(t,n){},Wt.prototype.forceUpdate=function(t){},Wt.prototype.render=function(){},Wt.prototype.update=function(t,n){},Wt.prototype.checkProp=function(t,n){},Wt.prototype.destroy=function(){var t=this,n=(t.$parent,t.$options,t.$emitter);t.$observer.destroy(),n.off(),st(t)},Wt.prototype.nextTick=function(t){this.$observer.nextTask.append(t,this)},Wt.prototype.toggle=function(t){return this.$observer.toggle(t)},Wt.prototype.increase=function(t,n,e){return this.$observer.increase(t,n,e)},Wt.prototype.decrease=function(t,n,e){return this.$observer.decrease(t,n,e)},Wt.prototype.insert=function(t,n,e){return this.$observer.insert(t,n,e)},Wt.prototype.append=function(t,n){return this.$observer.append(t,n)},Wt.prototype.prepend=function(t,n){return this.$observer.prepend(t,n)},Wt.prototype.removeAt=function(t,n){return this.$observer.removeAt(t,n)},Wt.prototype.remove=function(t,n){return this.$observer.remove(t,n)},Wt.prototype.copy=function(t,n){return this.$observer.copy(t,n)},Wt.version="1.0.0-alpha.125",Wt.is=x,Wt.array=S,Wt.object=ht,Wt.string=Z,Wt.logger=wt,Wt.Event=$,Wt.Emitter=xt,Wt}));
//# sourceMappingURL=yox.min.js.map
