!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=e()}(this,(function(){"use strict";var t=!0,e=!1,n=null,r=void 0,o="undefined",i="function",u=".",s=typeof window!==o?window:r,f=function(){},c=Object.freeze({}),a=Object.freeze([]),p="",l=/yox/.test(f.toString())?2:3,h={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:e,minifyCompiled:e,logLevel:l};function v(t){return typeof t===i}function y(t){return Array.isArray(t)}function d(t){return t!==n&&"object"==typeof t}function g(t){return"string"==typeof t}function m(t){return"number"==typeof t&&!isNaN(t)}function b(t){return"boolean"==typeof t}function w(t){return m(t)||g(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var x=Object.freeze({__proto__:null,func:v,array:y,object:d,string:g,number:m,boolean:b,numeric:w});function E(t,e,n){if(v(t))return y(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}var $=function(t,e){this.type=t,this.phase=$.PHASE_CURRENT,e&&(this.originalEvent=e)};function A(t,n,r){var o=t.length;if(o)if(r)for(var i=o-1;i>=0&&n(t[i],i)!==e;i--);else for(var u=0;u<o&&n(t[u],u)!==e;u++);}function O(t,e){t[t.length]=e}function k(t,e){t.unshift(e)}function _(t,e,n){y(e)?A(e,(function(e){n(t,e)})):n(t,e)}function j(t,e){_(t,e,O)}function C(t,e){_(t,e,k)}function z(t,n,r){var o=-1;return A(t,(function(t,i){if(r===e?t==n:t===n)return o=i,e})),o}function P(n,r,o){var i=0;return A(n,(function(t,u){(o===e?t==r:t===r)&&(n.splice(u,1),i++)}),t),i}function R(t,e,n){return z(t,e,n)>=0}function T(t){return!y(t)||!t.length}$.is=function(t){return t instanceof $},$.prototype.preventDefault=function(){var e=this;if(!e.isPrevented){var n=e.originalEvent;n&&n.preventDefault(),e.isPrevented=t}return e},$.prototype.stopPropagation=function(){var e=this;if(!e.isStoped){var n=e.originalEvent;n&&n.stopPropagation(),e.isStoped=t}return e},$.prototype.prevent=function(){return this.preventDefault()},$.prototype.stop=function(){return this.stopPropagation()},$.PHASE_CURRENT=0,$.PHASE_UPWARD=1,$.PHASE_DOWNWARD=-1;var D=Object.freeze({__proto__:null,each:A,push:j,unshift:C,indexOf:z,last:function(t){var e=t.length;if(e>0)return t[e-1]},pop:function(t){if(t.length>0)return t.pop()},remove:P,has:R,toArray:function(t){return y(t)?t:E(a.slice,t)},toObject:function(t,e,n){var r={};return A(t,(function(t){r[e?t[e]:t]=n||t})),r},join:function(t,e){return t.join(e)},falsy:T});function S(t){return v(t)&&function(t,e){return t!=n&&t.toString?t.toString():e!==r?e:p}(t).indexOf("[native code]")>=0}var N=function(){var t=Object.create(n);return{get:function(e){return t[e]},set:function(e,n){t[e]=n},keys:function(){return Object.keys(t)}}};function W(t){var e=N();return function(n){var o=e.get(n);if(o!==r)return o;var i=t(n);return e.set(n,i),i}}function F(t){var e=N();return function(n,r){var o=e.get(n);if(o){var i=o.get(r);if(i)return i}else o=N(),e.set(n,o);var u=t(n,r);return o.set(r,u),u}}var U=/-([a-z])/gi,H=/\B([A-Z])/g,I=/^[a-z]/,Y=W((function(t){return t.replace(U,(function(t,e){return J(e)}))})),M=W((function(t){return t.replace(H,(function(t,e){return"-"+Q(e)}))})),q=W((function(t){return t.replace(I,J)}));function K(t,e){return new Array(e+1).join(t)}function L(t,e,n){return m(n)?e===n?p:t.slice(e,n):t.slice(e)}function V(t,e,n){return t.indexOf(e,n!==r?n:0)}function B(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function G(t,e){return 0===V(t,e)}function Z(t,e){return t.charCodeAt(e||0)}function J(t){return t.toUpperCase()}function Q(t){return t.toLowerCase()}function X(t,e){return V(t,e)>=0}function tt(t){return!g(t)||!t.length}var et=Object.freeze({__proto__:null,camelize:Y,hyphenate:M,capitalize:q,repeat:K,trim:function(t){return tt(t)?p:t.trim()},slice:L,indexOf:V,lastIndexOf:B,startsWith:G,endsWith:function(t,e){var n=t.length-e.length;return n>=0&&B(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:Z,upper:J,lower:Q,has:X,falsy:tt}),nt=/\./g,rt=/\*/g,ot=/\*\*/g,it=F((function(t,e){return t===e||G(t,e+=u)?e.length:-1})),ut=W((function(t){return V(t,u)<0?[t]:t.split(u)}));function st(t,n){for(var r=ut(t),o=0,i=r.length-1;o<=i&&n(r[o],o,i)!==e;o++);}var ft=F((function(t,e){return t&&e?t+u+e:t||e})),ct=W((function(t){return X(t,"*")})),at=W((function(t){return new RegExp("^"+t.replace(nt,"\\.").replace(rt,"(\\w+)").replace(ot,"([.\\w]+?)")+"$")})),pt=F((function(t,e){var n=t.match(at(e));return n?n[1]:r})),lt={value:r};function ht(t){return Object.keys(t)}function vt(t,n){for(var r in t)if(n(t[r],r)===e)break}function yt(t){vt(t,(function(e,n){delete t[n]}))}function dt(t,e){return vt(e,(function(e,n){t[n]=e})),t}function gt(t,e){var n=t;return y(t)?e?(n=[],A(t,(function(t,r){n[r]=gt(t,e)}))):n=t.slice():d(t)&&(n={},vt(t,(function(t,r){n[r]=e?gt(t,e):t}))),n}function mt(t,o){return st(o,(function(o,i,u){if(t==n)return t=r,e;var s=t[o],f=s!==r;s&&v(s.get)&&(s=s.get()),i===u?f?(lt.value=s,t=lt):t=r:t=s})),t}function bt(t,e){return t[e]!==r}var wt=Object.freeze({__proto__:null,keys:ht,each:vt,clear:yt,extend:dt,merge:function(t,e){return t&&e?dt(dt({},t),e):t||e},copy:gt,get:mt,set:function(t,n,r,o){st(n,(function(n,i,u){if(i===u)t[n]=r;else if(t[n])t=t[n];else{if(!o)return e;t=t[n]={}}}))},has:bt,falsy:function(t){return!d(t)||y(t)||!ht(t).length}}),xt=typeof console!==o?console:n,Et=s&&/edge|msie|trident/i.test(s.navigator.userAgent)?p:"%c",$t=xt?Et?function(t,e,n){xt.log(Et+t,n,e)}:function(t,e){xt.log(t,e)}:f;function At(){var t=h.logLevel;return t>=1&&t<=5?t:l}function Ot(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var kt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){At()<=1&&$t(e||"Yox debug",t,Ot("#999"))},info:function(t,e){At()<=2&&$t(e||"Yox info",t,Ot("#2db7f5"))},warn:function(t,e){At()<=3&&$t(e||"Yox warn",t,Ot("#f90"))},error:function(t,e){At()<=4&&$t(e||"Yox error",t,Ot("#ed4014"))},fatal:function(t,e){if(At()<=5)throw new Error("["+(e||"Yox fatal")+"]: "+t)}}),_t=function(t){this.ns=t||e,this.listeners={}};function jt(e,n){return e?e===n.listener:t}function Ct(e,n){var r=n.ns;return r&&e?r===e:t}_t.prototype.fire=function(n,o,i){var u=this,s=g(n)?u.toEvent(n):n,f=u.listeners[s.type],c=t;if(f){f=f.slice();for(var a=o&&$.is(o[0])?o[0]:r,p=0,l=f.length;p<l;p++){var h=f[p];if(Ct(s.ns,h)&&R(f,h)&&(!i||i(s,o,h))){a&&(a.listener=h.listener);var v=E(h.listener,h.ctx,o);if(a&&(a.listener=r),h.num=h.num?h.num+1:1,h.num===h.max&&u.off(s.type,{ns:s.ns,listener:h.listener}),a&&(v===e?a.prevent().stop():a.isStoped&&(v=e)),v===e){c=e;break}}}}return c},_t.prototype.on=function(t,e){var n=this.listeners,r=v(e)?{listener:e}:e;if(d(r)&&v(r.listener)){if(!g(r.ns)){var o=this.toEvent(t);r.ns=o.ns,t=o.type}j(n[t]||(n[t]=[]),r)}},_t.prototype.off=function(e,n){var r=this,o=r.listeners;if(e){var i=r.toFilter(e,n),u=function(e,n){A(e,(function(t,n){jt(i.listener,t)&&Ct(i.ns,t)&&e.splice(n,1)}),t),e.length||delete o[n]};i.type?o[i.type]&&u(o[i.type],i.type):i.ns&&vt(o,u)}else r.listeners={}},_t.prototype.has=function(n,r){var o=this.listeners,i=this.toFilter(n,r),u=t,s=function(t){return A(t,(function(t){if(jt(i.listener,t)&&Ct(i.ns,t))return u=e})),u};return i.type?o[i.type]&&s(o[i.type]):i.ns&&vt(o,s),!u},_t.prototype.toEvent=function(t){var e={type:t,ns:p};if(this.ns){var n=V(t,u);n>=0&&(e.type=L(t,0,n),e.ns=L(t,n+1))}return e},_t.prototype.toFilter=function(t,e){var n;if(g((n=e?v(e)?{listener:e}:e:{}).ns))n.type=t;else{var r=this.toEvent(t);n.type=r.type,n.ns=r.ns}return n},typeof setImmediate===i&&S(setImmediate)&&setImmediate;var zt,Pt=typeof MessageChannel===i&&S(MessageChannel)?function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout,Rt=function(){this.tasks=[]};function Tt(e){var n=N();return A(e.split(","),(function(e){n.set(e,t)})),n}Rt.shared=function(){return zt||(zt=new Rt)},Rt.prototype.append=function(t,e){var n=this,r=n.tasks;j(r,{fn:t,ctx:e}),1===r.length&&Pt((function(){n.run()}))},Rt.prototype.prepend=function(t,e){var n=this,r=n.tasks;C(r,{fn:t,ctx:e}),1===r.length&&Pt((function(){n.run()}))},Rt.prototype.clear=function(){this.tasks.length=0},Rt.prototype.run=function(){var t=this.tasks;t.length&&(this.tasks=[],A(t,(function(t){E(t.fn,t.ctx)})))};Tt("area,base,embed,track,source,param,input,col,img,br,hr"),Tt("svg,g,defs,desc,metadata,symbol,use,image,path,rect,circle,line,ellipse,polyline,polygon,text,tspan,tref,textpath,marker,pattern,clippath,mask,filter,cursor,view,animate,font,font-face,glyph,missing-glyph,foreignObject"),Tt("id,class,name,value,for,accesskey,title,style,src,type,href,target,alt,placeholder,preload,poster,wrap,accept,pattern,dir,autocomplete,autocapitalize"),Tt("min,minlength,max,maxlength,step,width,height,size,rows,cols,tabindex"),Tt("disabled,checked,required,multiple,readonly,autofocus,autoplay,controls,loop,muted,novalidate,draggable,hidden,spellcheck");function Dt(t,e){return w(t)?+t:e!==r?e:0}K("'",2);var St=function(e,n,r,o,i,u,s){var f=this;if(f.keypath=e,f.cache=r,f.deps=o,f.observer=i,f.getter=u,f.setter=s,f.watcherOptions={sync:n,watcher:f.watcher=function(n,r,o){var u=f.value,s=f.get(t);s!==u&&i.diff(e,s,u)}},o){f.fixed=t;for(var c=0,a=o.length;c<a;c++)i.watch(o[c],f.watcherOptions)}};function Nt(t,e){if(t==n||e===p)return t;var r=mt(t,e);return r?r.value:void 0}function Wt(e,n,o,i,u,s){var f=function(t,n,o){if(n!==o){for(var f=ft(e,t),c=0;c<u;c++){var a=i[c];pt(f,a)!==r&&s(a,f,n,o)}Wt(f,n,o,i,u,s)}};(function(e,n,o){var i=g(e),u=g(n);if(i||u)return o("length",i?e.length:r,u?n.length:r),t})(n,o,f)||function(e,n,o){var i=y(e),u=y(n);if(i||u){var s=i?e.length:r,f=u?n.length:r;o("length",s,f);for(var c=0,a=Math.max(s||0,f||0);c<a;c++)o(p+c,i?e[c]:r,u?n[c]:r);return t}}(n,o,f)||function(e,n,o){var i=d(e),u=d(n);if(i||u){var s=N(),f=i?e:c,a=u?n:c;if(i)for(var p in f){var l=f[p];l!==a[p]&&(s.set(p,t),o(p,l,a[p]))}if(u)for(var h in a){var v=a[h];s.get(h)===r&&v!==f[h]&&o(h,f[h],v)}}}(n,o,f)}function Ft(t,e,n,o,i,u){var s;for(var f in o)if(ct(f))pt(t,f)!==r?u(f,t,e,n):i&&(s?s.push(f):s=[f]);else{var c=it(f,t);if(c>=0){var a=L(f,c),p=Nt(e,a),l=Nt(n,a);p!==l&&u(f,f,p,l)}}s&&Wt(t,e,n,s,s.length,u)}St.prototype.get=function(t){var e=this,n=e.getter,r=e.deps,o=e.observer,i=e.watcher,u=e.watcherOptions;if(e.cache){if(t||!bt(e,"value"))if(e.fixed)e.value=n();else{if(r)for(var s=r.length-1;s>=0;s--)o.unwatch(r[s],i);e.unique=N();var f=St.current;St.current=e,e.value=n();for(var c=e.unique.keys(),a=0,p=c.length;a<p;a++)o.watch(c[a],u);e.deps=c,St.current=f}}else e.value=n();return e.value},St.prototype.set=function(t){var e=this.setter;e&&e(t)},St.prototype.add=function(e){this.unique.set(e,t)};var Ut={watcher:f};function Ht(e,n){return v(e)?(Ut.watcher=e,Ut.immediate=n===t,Ut):e}var It=new Array(3),Yt=new Array(3),Mt=function(t,e){var n=this;n.data=t||{},n.context=e||n,n.nextTask=new Rt,n.syncEmitter=new _t,n.asyncEmitter=new _t,n.asyncOldValues={},n.asyncKeypaths={}};Mt.prototype.get=function(t,e,n){var r,o=St.current,i=this.data,u=this.computed;return t===p?i:(o&&!n&&o.add(t),u&&(r=mt(u,t)),r||(r=mt(i,t)),r?r.value:e)},Mt.prototype.set=function(t,e){var n=this,r=n.data,o=n.computed,i=function(t,e){var i,u=n.get(t);e!==u&&(st(t,(function(t,n,u){0!==n?i&&(n===u?i[t]=e:i=i[t]||(i[t]={})):o&&o[t]?0===u?o[t].set(e):i=o[t].get():0===u?r[t]=e:i=r[t]||(r[t]={})})),n.diff(t,e,u))};if(g(t))i(t,e);else if(d(t))for(var u in t)i(u,t[u])},Mt.prototype.diff=function(e,n,r){var o=this,i=o.syncEmitter,u=o.asyncEmitter,s=o.asyncOldValues,f=o.asyncKeypaths,c=36!==Z(e);Ft(e,n,r,i.listeners,c,(function(t,e,n,r){It[0]=n,It[1]=r,It[2]=e,i.fire({type:t,ns:p},It)})),Ft(e,n,r,u.listeners,c,(function(e,n,r,i){for(var c=u.listeners[e],a=0,p=c.length;a<p;a++)c[a].count++;f[n]||(s[n]=i,f[n]={}),f[n][e]=t,o.pending||(o.pending=t,o.nextTask.append((function(){o.pending&&o.diffAsync()})))}))},Mt.prototype.diffAsync=function(){var t=this,e=t.asyncEmitter,n=t.asyncOldValues,o=t.asyncKeypaths;t.pending=r,t.asyncOldValues={},t.asyncKeypaths={};var i=function(r){Yt[0]=t.get(r),Yt[1]=n[r],Yt[2]=r;var i=o[r],u=Yt[0]!==Yt[1],s=function(t,e,n){if(n.count)return n.count--,u};for(var f in i)e.fire({type:f,ns:p},Yt,s)};for(var u in n)i(u)},Mt.prototype.addComputed=function(e,n){var r,o,i,u=this,s=u.context,f=t,c=t;if(v(n))o=n.bind(s);else if(d(n)){var a=n;b(a.cache)&&(f=a.cache),b(a.sync)&&(c=a.sync),T(a.deps)||(r=a.deps),v(a.get)&&(o=a.get.bind(s)),v(a.set)&&(i=a.set.bind(s))}if(o){var p=new St(e,c,f,r,u,o,i);return u.computed||(u.computed={}),u.computed[e]=p,p}},Mt.prototype.removeComputed=function(t){var e=this.computed;e&&bt(e,t)&&delete e[t]},Mt.prototype.watch=function(t,e,n){var o=this,i=o.context,u=o.syncEmitter,s=o.asyncEmitter,f=function(t,e){var n=e.sync?u:s,f={ns:p,listener:e.watcher,ctx:i,count:0};e.once&&(f.max=1),n.on(t,f),e.immediate&&E(e.watcher,i,[o.get(t),r,t])};if(g(t))f(t,Ht(e,n));else for(var c in t)f(c,Ht(t[c]))},Mt.prototype.unwatch=function(t,e){var n={ns:p,listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},Mt.prototype.toggle=function(t){var e=!this.get(t);return this.set(t,e),e},Mt.prototype.increase=function(t,e,n){var r=Dt(this.get(t),0)+(e||1);if(!m(n)||r<=n)return this.set(t,r),r},Mt.prototype.decrease=function(t,e,n){var r=Dt(this.get(t),0)-(e||1);if(!m(n)||r>=n)return this.set(t,r),r},Mt.prototype.insert=function(n,r,o){var i=this.get(n),u=(i=y(i)?i.slice():[]).length;if(o===t||o===u)i.push(r);else if(o===e||0===o)i.unshift(r);else{if(!(o>0&&o<u))return;i.splice(o,0,r)}return this.set(n,i),t},Mt.prototype.append=function(e,n){return this.insert(e,n,t)},Mt.prototype.prepend=function(t,n){return this.insert(t,n,e)},Mt.prototype.removeAt=function(e,n){var r=this.get(e);if(y(r)&&n>=0&&n<r.length)return(r=r.slice()).splice(n,1),this.set(e,r),t},Mt.prototype.remove=function(e,n){var r=this.get(e);if(y(r)&&P(r=r.slice(),n))return this.set(e,r),t},Mt.prototype.copy=function(t,e){return gt(t,e)},Mt.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),yt(t)};var qt=function(){this.$emitter=new _t};qt.prototype.fire=function(t,e,n){this.$emitter.fire(e,[t,n])},qt.prototype.on=function(t,e){return this.$emitter.on(t,e),this},qt.prototype.off=function(t,e){return this.$emitter.off(t,e),this};var Kt=new qt,Lt=function(e){var n=this,r=e||c;n.$emitter=new _t(t),r.events&&n.on(r.events);var o=r.data,i=r.props,u=(r.vnode,r.propTypes,r.computed),s=r.methods,f=r.watchers,a=r.extensions;n.$options=r,a&&dt(n,a);var p=i?gt(i):{},l=n.$observer=new Mt(p,n);u&&vt(u,(function(t,e){l.addComputed(e,t)}));var h=v(o)?E(o,n,e):o;d(h)&&vt(h,(function(t,e){p[e]=t})),s&&vt(s,(function(t,e){n[e]=t})),f&&n.watch(f)};function Vt(t,e,n,r){var o=t.$emitter,i=o.toFilter(e,n),u={listener:i.listener,ns:i.ns,ctx:t};r&&(u.max=1),o.on(i.type,u)}function Bt(t,e,n,r){g(e)?Vt(t,e,n,r):vt(e,(function(e,n){Vt(t,n,e,r)}))}return Lt.define=function(t){return t},Lt.use=function(t){t.install(Lt)},Lt.nextTick=function(t,e){Rt.shared().append(t,e)},Lt.compile=function(t,e){return t},Lt.directive=function(t,e){},Lt.transition=function(t,e){},Lt.component=function(t,e){},Lt.partial=function(t,e){},Lt.filter=function(t,e){},Lt.prototype.get=function(t,e){return this.$observer.get(t,e)},Lt.prototype.set=function(t,e){var n=this.$observer;n&&n.set(t,e)},Lt.prototype.on=function(t,e){return Bt(this,t,e),this},Lt.prototype.once=function(e,n){return Bt(this,e,n,t),this},Lt.prototype.off=function(t,e){return this.$emitter.off(t,e),this},Lt.prototype.fire=function(e,n,o){var i,u=this,s=u.$emitter,f=u.$parent,c=u.$children;if($.is(e))i=e;else if(g(e))i=new $(e);else{var a=e;(i=new $(a.type)).ns=a.ns}if(i.ns===r){var p=s.toEvent(i.type);i.type=p.type,i.ns=p.ns}i.target||(i.target=u);var l,h=[i];return d(n)?j(h,n):n===t&&(o=t),(l=o&&i.target===u?t:s.fire(i,h))&&(o?c&&(i.phase=$.PHASE_DOWNWARD,A(c,(function(e){return l=e.fire(i,n,t)}))):f&&(i.phase=$.PHASE_UPWARD,l=f.fire(i,n))),l},Lt.prototype.watch=function(t,e,n){return this.$observer.watch(t,e,n),this},Lt.prototype.unwatch=function(t,e){return this.$observer.unwatch(t,e),this},Lt.prototype.loadComponent=function(t,e){},Lt.prototype.createComponent=function(t,e){return this},Lt.prototype.directive=function(t,e){},Lt.prototype.transition=function(t,e){},Lt.prototype.component=function(t,e){},Lt.prototype.partial=function(t,e){},Lt.prototype.filter=function(t,e){},Lt.prototype.forceUpdate=function(t){},Lt.prototype.render=function(){},Lt.prototype.update=function(t,e){},Lt.prototype.checkProp=function(t,e){},Lt.prototype.destroy=function(){var t=this,e=(t.$parent,t.$options,t.$emitter);t.$observer.destroy(),e.off(),yt(t)},Lt.prototype.nextTick=function(t){this.$observer.nextTask.append(t,this)},Lt.prototype.toggle=function(t){return this.$observer.toggle(t)},Lt.prototype.increase=function(t,e,n){return this.$observer.increase(t,e,n)},Lt.prototype.decrease=function(t,e,n){return this.$observer.decrease(t,e,n)},Lt.prototype.insert=function(t,e,n){return this.$observer.insert(t,e,n)},Lt.prototype.append=function(t,e){return this.$observer.append(t,e)},Lt.prototype.prepend=function(t,e){return this.$observer.prepend(t,e)},Lt.prototype.removeAt=function(t,e){return this.$observer.removeAt(t,e)},Lt.prototype.remove=function(t,e){return this.$observer.remove(t,e)},Lt.prototype.copy=function(t,e){return this.$observer.copy(t,e)},Lt.version="1.0.0-alpha.200",Lt.is=x,Lt.array=D,Lt.object=wt,Lt.string=et,Lt.logger=kt,Lt.Event=$,Lt.Emitter=_t,Lt.config=h,Lt.lifeCycle=Kt,Lt}));
//# sourceMappingURL=yox.min.js.map
