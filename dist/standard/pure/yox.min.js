!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Yox=e()}(this,(function(){"use strict";var t=!0,e=!1,n=null,r=void 0,o="undefined",i="function",u=".",f=typeof window!==o?window:r,s=function(){},c=Object.freeze({}),a=Object.freeze([]),p="",l=/yox/.test(s.toString())?2:3,v={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:e,minifyCompiled:e,logLevel:l};function h(t){return typeof t===i}function y(t){return Array.isArray(t)}function d(t){return t!==n&&"object"==typeof t}function g(t){return"string"==typeof t}function m(t){return"number"==typeof t&&!isNaN(t)}function b(t){return"boolean"==typeof t}function w(t){return!isNaN(t-parseFloat(t))}var x=Object.freeze({__proto__:null,func:h,array:y,object:d,string:g,number:m,boolean:b,numeric:w});function E(t,e,n){return y(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}var $=function(t,e){this.type=t,this.phase=$.PHASE_CURRENT,e&&(this.originalEvent=e)};function k(t,n,r){var o=t.length;if(o)if(r)for(var i=o-1;i>=0&&n(t[i],i)!==e;i--);else for(var u=0;u<o&&n(t[u],u)!==e;u++);}function A(t,e){t[t.length]=e}function O(t,e){t.unshift(e)}function _(t,e,n){y(e)?k(e,(function(e){n(t,e)})):n(t,e)}function T(t,e){_(t,e,A)}function j(t,e){_(t,e,O)}function C(t,n,r){var o=-1;return k(t,(function(t,i){if(r===e?t==n:t===n)return o=i,e})),o}function D(n,r,o){var i=0;return k(n,(function(t,u){(o===e?t==r:t===r)&&(n.splice(u,1),i++)}),t),i}function P(t,e,n){return C(t,e,n)>=0}function R(t,e){return t.join(e)}function z(t){return!y(t)||!t.length}$.is=function(t){return t instanceof $},$.prototype.preventDefault=function(){var e=this;if(!e.isPrevented){var n=e.originalEvent;n&&n.preventDefault(),e.isPrevented=t}return e},$.prototype.stopPropagation=function(){var e=this;if(!e.isStoped){var n=e.originalEvent;n&&n.stopPropagation(),e.isStoped=t}return e},$.prototype.prevent=function(){return this.preventDefault()},$.prototype.stop=function(){return this.stopPropagation()},$.PHASE_CURRENT=0,$.PHASE_UPWARD=1,$.PHASE_DOWNWARD=-1;var S=Object.freeze({__proto__:null,each:k,push:T,unshift:j,indexOf:C,last:function(t){var e=t.length;if(e>0)return t[e-1]},pop:function(t){if(t.length>0)return t.pop()},remove:D,has:P,toArray:function(t){return y(t)?t:E(a.slice,t)},toObject:function(t,e,n){var r={};return k(t,(function(t){r[e?t[e]:t]=n||t})),r},join:R,falsy:z});function N(t){return h(t)&&function(t,e){return t!=n&&t.toString?t.toString():e!==r?e:p}(t).indexOf("[native code]")>=0}var W=function(){var t=Object.create(n);return{get:function(e){return t[e]},set:function(e,n){t[e]=n},has:function(e){return e in t},keys:function(){return Object.keys(t)}}};function F(t){var e=W();return function(n){var o=e.get(n);if(o!==r)return o;var i=t(n);return e.set(n,i),i}}function U(t){var e=W();return function(n,r){var o=e.get(n);if(o){var i=o.get(r);if(i)return i}else o=W(),e.set(n,o);var u=t(n,r);return o.set(r,u),u}}var H=/-([a-z])/gi,I=/\B([A-Z])/g,Y=/^[a-z]/,M=F((function(t){return t.replace(H,(function(t,e){return J(e)}))})),K=F((function(t){return t.replace(I,(function(t,e){return"-"+Q(e)}))})),L=F((function(t){return t.replace(Y,J)}));function V(t,e,n){return m(n)?e===n?p:t.slice(e,n):t.slice(e)}function q(t,e,n){return t.indexOf(e,n!==r?n:0)}function B(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function G(t,e){return 0===q(t,e)}function Z(t,e){return t.charCodeAt(e||0)}function J(t){return t.toUpperCase()}function Q(t){return t.toLowerCase()}function X(t,e){return q(t,e)>=0}function tt(t){return!g(t)||!t.length}var et=Object.freeze({__proto__:null,camelize:M,hyphenate:K,capitalize:L,repeat:function(t,e){return R(new Array(e+1),t)},trim:function(t){return tt(t)?p:t.trim()},slice:V,indexOf:q,lastIndexOf:B,startsWith:G,endsWith:function(t,e){var n=t.length-e.length;return n>=0&&B(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:Z,upper:J,lower:Q,has:X,falsy:tt}),nt=/\./g,rt=/\*/g,ot=/\*\*/g,it=U((function(t,e){return t===e||G(t,e+=u)?e.length:-1})),ut=F((function(t){return q(t,u)<0?[t]:t.split(u)}));function ft(t,n){for(var r=ut(t),o=0,i=r.length-1;o<=i&&n(r[o],o,i)!==e;o++);}var st=U((function(t,e){return t&&e?t+u+e:t||e})),ct=F((function(t){return X(t,"*")})),at=F((function(t){return new RegExp("^"+t.replace(nt,"\\.").replace(rt,"(\\w+)").replace(ot,"([.\\w]+?)")+"$")})),pt=U((function(t,e){var n=t.match(at(e));return n?n[1]:r})),lt={value:r};function vt(t){return Object.keys(t)}function ht(t,n){for(var r in t)if(n(t[r],r)===e)break}function yt(t){ht(t,(function(e,n){delete t[n]}))}function dt(t,e){return ht(e,(function(e,n){t[n]=e})),t}function gt(t,e){var n=t;return y(t)?e?(n=[],k(t,(function(t,r){n[r]=gt(t,e)}))):n=t.slice():d(t)&&(n={},ht(t,(function(t,r){n[r]=e?gt(t,e):t}))),n}function mt(t,o){var i=t;return ft(o,(function(t,o,u){if(i==n)return i=r,e;var f=i[t],s=f!==r;f&&h(f.get)&&(f=f.get()),o===u?s?(lt.value=f,i=lt):i=r:i=f})),i}function bt(t,e){return t[e]!==r}var wt=Object.freeze({__proto__:null,keys:vt,each:ht,clear:yt,extend:dt,merge:function(t,e){return t&&e?dt(dt({},t),e):t||e},copy:gt,get:mt,set:function(t,n,r,o){var i=t;ft(n,(function(t,n,u){if(n===u)i[t]=r;else if(i[t])i=i[t];else{if(!o)return e;i=i[t]={}}}))},has:bt,falsy:function(t){return!d(t)||y(t)||!vt(t).length}}),xt=typeof console!==o?console:n,Et=f&&/edge|msie|trident/i.test(f.navigator.userAgent)?p:"%c",$t=xt?Et?function(t,e,n){xt.log(Et+t,n,e)}:function(t,e){xt.log(t,e)}:s;function kt(){var t=v.logLevel;return t>=1&&t<=5?t:l}function At(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var Ot=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){kt()<=1&&$t(e||"Yox debug",t,At("#999"))},info:function(t,e){kt()<=2&&$t(e||"Yox info",t,At("#2db7f5"))},warn:function(t,e){kt()<=3&&$t(e||"Yox warn",t,At("#f90"))},error:function(t,e){kt()<=4&&$t(e||"Yox error",t,At("#ed4014"))},fatal:function(t,e){if(kt()<=5)throw new Error("["+(e||"Yox fatal")+"]: "+t)}}),_t=function(t){this.ns=t||e,this.listeners={}};function Tt(e,n){return e?e===n.listener:t}function jt(e,n){var r=n.ns;return r&&e?r===e:t}_t.prototype.fire=function(n,o,i){var u=this,f=g(n)?u.toEvent(n):n,s=u.listeners[f.type],c=t;if(s){s=s.slice();for(var a=o&&$.is(o[0])?o[0]:r,p=0,l=s.length;p<l;p++){var v=s[p];if(jt(f.ns,v)&&P(s,v)&&(!i||i(f,o,v))){var h=E(v.listener,v.ctx,o);if(v.num=v.num?v.num+1:1,v.num===v.max&&u.off(f.type,{ns:f.ns,listener:v.listener}),a&&(h===e?a.prevent().stop():a.isStoped&&(h=e)),h===e){c=e;break}}}}return c},_t.prototype.on=function(t,e){var n=this.listeners,r=h(e)?{listener:e}:e;if(d(r)&&h(r.listener)){if(!g(r.ns)){var o=this.toEvent(t);r.ns=o.ns,t=o.type}T(n[t]||(n[t]=[]),r)}},_t.prototype.off=function(e,n){var r=this,o=r.listeners;if(e){var i=r.toFilter(e,n),u=function(e,n){k(e,(function(t,n){Tt(i.listener,t)&&jt(i.ns,t)&&e.splice(n,1)}),t),e.length||delete o[n]};i.type?o[i.type]&&u(o[i.type],i.type):i.ns&&ht(o,u)}else r.listeners={}},_t.prototype.has=function(n,r){var o=this.listeners,i=this.toFilter(n,r),u=t,f=function(t){return k(t,(function(t){if(Tt(i.listener,t)&&jt(i.ns,t))return u=e})),u};return i.type?o[i.type]&&f(o[i.type]):i.ns&&ht(o,f),!u},_t.prototype.toEvent=function(t){var e={type:t,ns:p};if(this.ns){var n=q(t,u);n>=0&&(e.type=V(t,0,n),e.ns=V(t,n+1))}return e},_t.prototype.toFilter=function(t,e){var n;if(g((n=e?h(e)?{listener:e}:e:{}).ns))n.type=t;else{var r=this.toEvent(t);n.type=r.type,n.ns=r.ns}return n},typeof setImmediate===i&&N(setImmediate)&&setImmediate;var Ct,Dt=typeof MessageChannel===i&&N(MessageChannel)?function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout,Pt=function(t){this.tasks=[],this.hooks=t||c};function Rt(t,e){return w(t)?+t:e!==r?e:0}Pt.shared=function(){return Ct||(Ct=new Pt)},Pt.prototype.append=function(t,e){var n=this,r=n.tasks;T(r,{fn:t,ctx:e}),1===r.length&&Dt((function(){n.run()}))},Pt.prototype.prepend=function(t,e){var n=this,r=n.tasks;j(r,{fn:t,ctx:e}),1===r.length&&Dt((function(){n.run()}))},Pt.prototype.clear=function(){this.tasks.length=0},Pt.prototype.run=function(){var t=this,e=t.tasks,n=t.hooks,r=e.length;if(r){t.tasks=[],n.beforeTask&&n.beforeTask();for(var o=0;o<r;o++)E(e[o].fn,e[o].ctx);n.afterTask&&n.afterTask()}};var zt=function(e,n,r,o,i,u,f){var s=this;if(s.keypath=e,s.cache=r,s.deps=o,s.observer=i,s.getter=u,s.setter=f,s.watcherOptions={sync:n,watcher:s.watcher=function(n,r,o){var u=s.value,f=s.get(t);f!==u&&i.diff(e,f,u)}},o){s.fixed=t;for(var c=0,a=o.length;c<a;c++)i.watch(o[c],s.watcherOptions)}};function St(t,e){if(t==n||e===p)return t;var r=mt(t,e);return r?r.value:void 0}function Nt(e,n,o,i,u,f){var s=function(t,n,o){if(n!==o){for(var s=st(e,t),c=0;c<u;c++){var a=i[c];pt(s,a)!==r&&f(a,s,n,o)}Nt(s,n,o,i,u,f)}};(function(e,n,o){var i=g(e),u=g(n);if(i||u)return o("length",i?e.length:r,u?n.length:r),t})(n,o,s)||function(e,n,o){var i=y(e),u=y(n);if(i||u){var f=i?e.length:r,s=u?n.length:r;o("length",f,s);for(var c=0,a=Math.max(f||0,s||0);c<a;c++)o(p+c,i?e[c]:r,u?n[c]:r);return t}}(n,o,s)||function(e,n,o){var i=d(e),u=d(n);if(i||u){var f=W(),s=i?e:c,a=u?n:c;if(i)for(var p in s){var l=s[p];l!==a[p]&&(f.set(p,t),o(p,l,a[p]))}if(u)for(var v in a){var h=a[v];f.get(v)===r&&h!==s[v]&&o(v,s[v],h)}}}(n,o,s)}function Wt(t,e,n,o,i,u){var f;for(var s in o)if(ct(s))pt(t,s)!==r?u(s,t,e,n):i&&(f?f.push(s):f=[s]);else{var c=it(s,t);if(c>=0){var a=V(s,c),p=St(e,a),l=St(n,a);p!==l&&u(s,s,p,l)}}f&&Nt(t,e,n,f,f.length,u)}zt.prototype.get=function(t){var e=this,n=e.getter,r=e.deps,o=e.observer,i=e.watcher,u=e.watcherOptions;if(e.cache){if(t||!bt(e,"value"))if(e.fixed)e.value=n();else{if(r)for(var f=r.length-1;f>=0;f--)o.unwatch(r[f],i);e.unique=W();var s=zt.current;zt.current=e,e.value=n();for(var c=e.unique.keys(),a=0,p=c.length;a<p;a++)o.watch(c[a],u);e.deps=c,zt.current=s}}else e.value=n();return e.value},zt.prototype.set=function(t){var e=this.setter;e&&e(t)},zt.prototype.add=function(e){this.unique.set(e,t)};var Ft={watcher:s};function Ut(e,n){return h(e)?(Ft.watcher=e,Ft.immediate=n===t,Ft):e}var Ht=function(t,e,n){var r=this;r.data=t||{},r.context=e||r,r.nextTask=n||new Pt,r.syncEmitter=new _t,r.asyncEmitter=new _t,r.asyncOldValues={},r.asyncKeypaths={}};Ht.prototype.get=function(t,e,n){var r,o=zt.current,i=this.data,u=this.computed;return t===p?i:(o&&!n&&o.add(t),u&&(r=mt(u,t)),r||(r=mt(i,t)),r?r.value:e)},Ht.prototype.set=function(t,e){var n=this,r=n.data,o=n.computed,i=function(t,e){var i,u=n.get(t);e!==u&&(ft(t,(function(t,n,u){0!==n?i&&(n===u?i[t]=e:i=i[t]||(i[t]={})):o&&o[t]?0===u?o[t].set(e):i=o[t].get():0===u?r[t]=e:i=r[t]||(r[t]={})})),n.diff(t,e,u))};if(g(t))i(t,e);else if(d(t))for(var u in t)i(u,t[u])},Ht.prototype.diff=function(e,n,r){var o=this,i=o.syncEmitter,u=o.asyncEmitter,f=o.asyncOldValues,s=o.asyncKeypaths,c=36!==Z(e);Wt(e,n,r,i.listeners,c,(function(t,e,n,r){i.fire({type:t,ns:p},[n,r,e])})),Wt(e,n,r,u.listeners,c,(function(e,n,r,i){for(var c=u.listeners[e],a=0,p=c.length;a<p;a++)c[a].count++;s[n]||(f[n]=i,s[n]={}),s[n][e]=t,o.pending||(o.pending=t,o.nextTask.append((function(){o.pending&&o.diffAsync()})))}))},Ht.prototype.diffAsync=function(){var t=this,e=t.asyncEmitter,n=t.asyncOldValues,o=t.asyncKeypaths;t.pending=r,t.asyncOldValues={},t.asyncKeypaths={};var i=function(r){var i=[t.get(r),n[r],r],u=o[r],f=i[0]!==i[1],s=function(t,e,n){if(n.count)return n.count--,f};for(var c in u)e.fire({type:c,ns:p},i,s)};for(var u in n)i(u)},Ht.prototype.addComputed=function(e,n){var r,o,i,u=this,f=u.context,s=t,c=t;if(h(n))o=n.bind(f);else if(d(n)){var a=n;b(a.cache)&&(s=a.cache),b(a.sync)&&(c=a.sync),z(a.deps)||(r=a.deps),h(a.get)&&(o=a.get.bind(f)),h(a.set)&&(i=a.set.bind(f))}if(o){var p=new zt(e,c,s,r,u,o,i);return u.computed||(u.computed={}),u.computed[e]=p,p}},Ht.prototype.removeComputed=function(t){var e=this.computed;e&&bt(e,t)&&delete e[t]},Ht.prototype.watch=function(t,e,n){var o=this,i=o.context,u=o.syncEmitter,f=o.asyncEmitter,s=function(t,e){var n=e.sync?u:f,s={ns:p,listener:e.watcher,ctx:i,count:0};e.once&&(s.max=1),n.on(t,s),e.immediate&&e.watcher.call(i,o.get(t),r,t)};if(g(t))s(t,Ut(e,n));else for(var c in t)s(c,Ut(t[c]))},Ht.prototype.unwatch=function(t,e){var n={ns:p,listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},Ht.prototype.toggle=function(t){var e=!this.get(t);return this.set(t,e),e},Ht.prototype.increase=function(t,e,n){var r=Rt(this.get(t),0)+(e||1);if(!m(n)||r<=n)return this.set(t,r),r},Ht.prototype.decrease=function(t,e,n){var r=Rt(this.get(t),0)-(e||1);if(!m(n)||r>=n)return this.set(t,r),r},Ht.prototype.insert=function(n,r,o){var i=this.get(n),u=(i=y(i)?i.slice():[]).length;if(o===t||o===u)i.push(r);else if(o===e||0===o)i.unshift(r);else{if(!(o>0&&o<u))return;i.splice(o,0,r)}return this.set(n,i),t},Ht.prototype.append=function(e,n){return this.insert(e,n,t)},Ht.prototype.prepend=function(t,n){return this.insert(t,n,e)},Ht.prototype.removeAt=function(e,n){var r=this.get(e);if(y(r)&&n>=0&&n<r.length)return(r=r.slice()).splice(n,1),this.set(e,r),t},Ht.prototype.remove=function(e,n){var r=this.get(e);if(y(r)&&D(r=r.slice(),n))return this.set(e,r),t},Ht.prototype.copy=function(t,e){return gt(t,e)},Ht.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),yt(t)};var It=function(e){var n=this,o=e||c;n.$emitter=new _t(t),o.events&&n.on(o.events);var i=o.data,u=o.props;o.vnode,o.propTypes;var f=o.computed,s=o.methods,a=o.watchers,p=o.extensions;n.$options=o,p&&dt(n,p);var l=u?gt(u):{},v=n.$observer=new Ht(l,n,n.$nextTask=new Pt({afterTask:function(){n.$isDirty&&(n.$isDirty=r,n.update(n.render(),n.$vnode))}}));f&&ht(f,(function(t,e){v.addComputed(e,t)}));var y=h(i)?i.call(n,e):i;d(y)&&ht(y,(function(t,e){l[e]=t})),s&&ht(s,(function(t,e){n[e]=t})),a&&v.watch(a)};function Yt(t,e,n,r){var o=t.$emitter,i=o.toFilter(e,n),u={listener:i.listener,ns:i.ns,ctx:t};r&&(u.max=1),o.on(i.type,u)}function Mt(t,e,n,r){g(e)?Yt(t,e,n,r):ht(e,(function(e,n){Yt(t,n,e,r)}))}return It.define=function(t){return t},It.use=function(t){t.install(It)},It.nextTick=function(t,e){Pt.shared().append(t,e)},It.compile=function(t,e){return t},It.directive=function(t,e){},It.transition=function(t,e){},It.component=function(t,e){},It.partial=function(t,e){},It.filter=function(t,e){},It.prototype.get=function(t,e){return this.$observer.get(t,e)},It.prototype.set=function(t,e){var n=this.$observer;n&&n.set(t,e)},It.prototype.on=function(t,e){return Mt(this,t,e),this},It.prototype.once=function(e,n){return Mt(this,e,n,t),this},It.prototype.off=function(t,e){return this.$emitter.off(t,e),this},It.prototype.fire=function(e,n,o){var i,u=this,f=u.$emitter,s=u.$parent,c=u.$children;if($.is(e))i=e;else if(g(e))i=new $(e);else{var a=e;(i=new $(a.type)).ns=a.ns}if(i.ns===r){var p=f.toEvent(i.type);i.type=p.type,i.ns=p.ns}i.target||(i.target=u);var l,v=[i];return d(n)?T(v,n):n===t&&(o=t),(l=o&&i.target===u?t:f.fire(i,v))&&(o?c&&(i.phase=$.PHASE_DOWNWARD,k(c,(function(e){return l=e.fire(i,n,t)}))):s&&(i.phase=$.PHASE_UPWARD,l=s.fire(i,n))),l},It.prototype.watch=function(t,e,n){return this.$observer.watch(t,e,n),this},It.prototype.unwatch=function(t,e){return this.$observer.unwatch(t,e),this},It.prototype.loadComponent=function(t,e){},It.prototype.createComponent=function(t,e){return this},It.prototype.directive=function(t,e){},It.prototype.transition=function(t,e){},It.prototype.component=function(t,e){},It.prototype.partial=function(t,e){},It.prototype.filter=function(t,e){},It.prototype.forceUpdate=function(t){},It.prototype.render=function(){},It.prototype.update=function(t,e){},It.prototype.checkProp=function(t,e){},It.prototype.destroy=function(){var t=this;t.$parent,t.$options;var e=t.$emitter;t.$observer.destroy(),e.off(),yt(t)},It.prototype.nextTick=function(t){this.$nextTask.append(t,this)},It.prototype.toggle=function(t){return this.$observer.toggle(t)},It.prototype.increase=function(t,e,n){return this.$observer.increase(t,e,n)},It.prototype.decrease=function(t,e,n){return this.$observer.decrease(t,e,n)},It.prototype.insert=function(t,e,n){return this.$observer.insert(t,e,n)},It.prototype.append=function(t,e){return this.$observer.append(t,e)},It.prototype.prepend=function(t,e){return this.$observer.prepend(t,e)},It.prototype.removeAt=function(t,e){return this.$observer.removeAt(t,e)},It.prototype.remove=function(t,e){return this.$observer.remove(t,e)},It.prototype.copy=function(t,e){return this.$observer.copy(t,e)},It.version="1.0.0-alpha.223",It.is=x,It.array=S,It.object=wt,It.string=et,It.logger=Ot,It.Event=$,It.Emitter=_t,It.config=v,It}));
//# sourceMappingURL=yox.min.js.map
