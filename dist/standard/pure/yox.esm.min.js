const t="undefined"!=typeof window?window:undefined,e=function(){},n=Object.freeze({}),r=Object.freeze([]),s=/yox/.test(e.toString())?2:3,i={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:false,minifyCompiled:false,logLevel:s};function o(t){return"function"==typeof t}function c(t){return Array.isArray(t)}function u(t){return null!==t&&"object"==typeof t}function f(t){return"string"==typeof t}function a(t){return"number"==typeof t&&!isNaN(t)}function l(t){return"boolean"==typeof t}function h(t){return a(t)||f(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var d=Object.freeze({__proto__:null,func:o,array:c,object:u,string:f,number:a,boolean:l,numeric:h});function p(t,e,n){if(o(t))return c(n)?t.apply(e,n):undefined!==e?t.call(e,n):undefined!==n?t(n):t()}class g{constructor(t,e){this.type=t,this.phase=g.PHASE_CURRENT,e&&(this.originalEvent=e)}static is(t){return t instanceof g}preventDefault(){const t=this;if(!t.isPrevented){const{originalEvent:e}=t;e&&e.preventDefault(),t.isPrevented=true}return t}stopPropagation(){const t=this;if(!t.isStoped){const{originalEvent:e}=t;e&&e.stopPropagation(),t.isStoped=true}return t}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function y(t,e,n){const{length:r}=t;if(r)if(n)for(let n=r-1;n>=0&&false!==e(t[n],n);n--);else for(let n=0;n<r&&false!==e(t[n],n);n++);}function v(t,e){t[t.length]=e}function m(t,e){t.unshift(e)}function b(t,e,n){c(e)?y(e,(function(e){n(t,e)})):n(t,e)}function w(t,e){b(t,e,v)}function x(t,e){b(t,e,m)}function $(t,e,n){let r=-1;return y(t,(function(t,s){if(false===n?t==e:t===e)return r=s,false})),r}function E(t,e,n){let r=0;return y(t,(function(s,i){(false===n?s==e:s===e)&&(t.splice(i,1),r++)}),true),r}function k(t,e,n){return $(t,e,n)>=0}function A(t,e){return t.join(e)}function O(t){return!c(t)||!t.length}g.PHASE_CURRENT=0,g.PHASE_UPWARD=1,g.PHASE_DOWNWARD=-1;var _=Object.freeze({__proto__:null,each:y,push:w,unshift:x,indexOf:$,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:E,has:k,toArray:function(t){return c(t)?t:p(r.slice,t)},toObject:function(t,e,n){let r={};return y(t,(function(t){r[e?t[e]:t]=n||t})),r},join:A,falsy:O});function T(t){return o(t)&&function(t,e){return null!=t&&t.toString?t.toString():void 0!==e?e:""}(t).indexOf("[native code]")>=0}let j=function(){const t=Object.create(null);return{get:e=>t[e],set(e,n){t[e]=n},has:e=>e in t,keys:()=>Object.keys(t)}};function C(t){const e=j();return function(n){const r=e.get(n);if(undefined!==r)return r;const s=t(n);return e.set(n,s),s}}function D(t){const e=j();return function(n,r){let s=e.get(n);if(s){const t=s.get(r);if(t)return t}else s=j(),e.set(n,s);const i=t(n,r);return s.set(r,i),i}}const P=/-([a-z])/gi,R=/\B([A-Z])/g,z=/^[a-z]/,S=C((function(t){return t.replace(P,(function(t,e){return Y(e)}))})),N=C((function(t){return t.replace(R,(function(t,e){return"-"+K(e)}))})),W=C((function(t){return t.replace(z,Y)}));function F(t,e,n){return a(n)?e===n?"":t.slice(e,n):t.slice(e)}function U(t,e,n){return t.indexOf(e,undefined!==n?n:0)}function H(t,e,n){return t.lastIndexOf(e,undefined!==n?n:t.length)}function I(t,e){return 0===U(t,e)}function M(t,e){return t.charCodeAt(e||0)}function Y(t){return t.toUpperCase()}function K(t){return t.toLowerCase()}function L(t,e){return U(t,e)>=0}function V(t){return!f(t)||!t.length}var q=Object.freeze({__proto__:null,camelize:S,hyphenate:N,capitalize:W,repeat:function(t,e){return A(new Array(e+1),t)},trim:function(t){return V(t)?"":t.trim()},slice:F,indexOf:U,lastIndexOf:H,startsWith:I,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&H(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:M,upper:Y,lower:K,has:L,falsy:V});const B=/\./g,G=/\*/g,Z=/\*\*/g,J=D((function(t,e){return t===e||I(t,e+=".")?e.length:-1})),Q=C((function(t){return U(t,".")<0?[t]:t.split(".")}));function X(t,e){const n=Q(t);for(let t=0,r=n.length-1;t<=r&&false!==e(n[t],t,r);t++);}const tt=D((function(t,e){return t&&e?t+"."+e:t||e})),et=C((function(t){return L(t,"*")})),nt=C((function(t){return new RegExp(`^${t.replace(B,"\\.").replace(G,"(\\w+)").replace(Z,"([.\\w]+?)")}$`)})),rt=D((function(t,e){const n=t.match(nt(e));return n?n[1]:undefined})),st={value:undefined};function it(t){return Object.keys(t)}function ot(t,e){for(let n in t)if(false===e(t[n],n))break}function ct(t){ot(t,(function(e,n){delete t[n]}))}function ut(t,e){return ot(e,(function(e,n){t[n]=e})),t}function ft(t,e){let n=t;return c(t)?e?(n=[],y(t,(function(t,r){n[r]=ft(t,e)}))):n=t.slice():u(t)&&(n={},ot(t,(function(t,r){n[r]=e?ft(t,e):t}))),n}function at(t,e){let n=t;return X(e,(function(t,e,r){if(null==n)return n=undefined,false;{let s=n[t],i=undefined!==s;s&&o(s.get)&&(s=s.get()),e===r?i?(st.value=s,n=st):n=undefined:n=s}})),n}function lt(t,e){return undefined!==t[e]}var ht=Object.freeze({__proto__:null,keys:it,each:ot,clear:ct,extend:ut,merge:function(t,e){return t&&e?ut(ut({},t),e):t||e},copy:ft,get:at,set:function(t,e,n,r){let s=t;X(e,(function(t,e,i){if(e===i)s[t]=n;else if(s[t])s=s[t];else{if(!r)return false;s=s[t]={}}}))},has:lt,falsy:function(t){return!u(t)||c(t)||!it(t).length}});const dt="undefined"!=typeof console?console:null,pt=t&&/edge|msie|trident/i.test(t.navigator.userAgent)?"":"%c",gt=dt?pt?function(t,e,n){dt.log(pt+t,n,e)}:function(t,e){dt.log(t,e)}:e;function yt(){const{logLevel:t}=i;return t>=1&&t<=5?t:s}function vt(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var mt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){yt()<=1&&gt(e||"Yox debug",t,vt("#999"))},info:function(t,e){yt()<=2&&gt(e||"Yox info",t,vt("#2db7f5"))},warn:function(t,e){yt()<=3&&gt(e||"Yox warn",t,vt("#f90"))},error:function(t,e){yt()<=4&&gt(e||"Yox error",t,vt("#ed4014"))},fatal:function(t,e){if(yt()<=5)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class bt{constructor(t){this.ns=t||false,this.listeners={}}fire(t,e,n){let r=this,s=f(t)?r.toEvent(t):t,i=r.listeners[s.type],o=true;if(i){i=i.slice();const t=e&&g.is(e[0])?e[0]:undefined;for(let c=0,u=i.length;c<u;c++){let u=i[c];if(!xt(s.ns,u)||!k(i,u)||n&&!n(s,e,u))continue;let f=p(u.listener,u.ctx,e);if(u.num=u.num?u.num+1:1,u.num===u.max&&r.off(s.type,{ns:s.ns,listener:u.listener}),t&&(false===f?t.prevent().stop():t.isStoped&&(f=false)),false===f){o=false;break}}}return o}on(t,e){const n=this,r=n.listeners,s=o(e)?{listener:e}:e;if(u(s)&&o(s.listener)){if(!f(s.ns)){const e=n.toEvent(t);s.ns=e.ns,t=e.type}w(r[t]||(r[t]=[]),s)}}off(t,e){const n=this,r=n.listeners;if(t){const s=n.toFilter(t,e),i=function(t,e){y(t,(function(e,n){wt(s.listener,e)&&xt(s.ns,e)&&t.splice(n,1)}),true),t.length||delete r[e]};s.type?r[s.type]&&i(r[s.type],s.type):s.ns&&ot(r,i)}else n.listeners={}}has(t,e){let n=this.listeners,r=this.toFilter(t,e),s=true,i=function(t){return y(t,(function(t){if(wt(r.listener,t)&&xt(r.ns,t))return s=false})),s};return r.type?n[r.type]&&i(n[r.type]):r.ns&&ot(n,i),!s}toEvent(t){const e={type:t,ns:""};if(this.ns){const n=U(t,".");n>=0&&(e.type=F(t,0,n),e.ns=F(t,n+1))}return e}toFilter(t,e){let n;if(n=e?o(e)?{listener:e}:e:{},f(n.ns))n.type=t;else{const e=this.toEvent(t);n.type=e.type,n.ns=e.ns}return n}}function wt(t,e){return!t||t===e.listener}function xt(t,e){const{ns:n}=e;return!n||!t||n===t}let $t;"function"==typeof setImmediate&&T(setImmediate)&&($t=setImmediate),$t="function"==typeof MessageChannel&&T(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;var Et=$t;let kt;class At{constructor(t){this.tasks=[],this.hooks=t||n}static shared(){return kt||(kt=new At)}append(t,e){const n=this,{tasks:r}=n;w(r,{fn:t,ctx:e}),1===r.length&&Et((function(){n.run()}))}prepend(t,e){const n=this,{tasks:r}=n;x(r,{fn:t,ctx:e}),1===r.length&&Et((function(){n.run()}))}clear(){this.tasks.length=0}run(){const t=this,{tasks:e,hooks:n}=t,{length:r}=e;if(r){t.tasks=[],n.beforeTask&&n.beforeTask();for(let t=0;t<r;t++)p(e[t].fn,e[t].ctx);n.afterTask&&n.afterTask()}}}function Ot(t,e){return h(t)?+t:undefined!==e?e:0}class _t{constructor(t,e,n,r,s,i,o){const c=this;if(c.keypath=t,c.cache=n,c.deps=r,c.observer=s,c.getter=i,c.setter=o,c.watcherOptions={sync:e,watcher:c.watcher=function(e,n,r){const i=c.value,o=c.get(true);o!==i&&s.diff(t,o,i)}},r){c.fixed=true;for(let t=0,e=r.length;t<e;t++)s.watch(r[t],c.watcherOptions)}}get(t){const e=this,{getter:n,deps:r,observer:s,watcher:i,watcherOptions:o}=e;if(e.cache){if(t||!lt(e,"value"))if(e.fixed)e.value=n();else{if(r)for(let t=r.length-1;t>=0;t--)s.unwatch(r[t],i);e.unique=j();const t=_t.current;_t.current=e,e.value=n();const c=e.unique.keys();for(let t=0,e=c.length;t<e;t++)s.watch(c[t],o);e.deps=c,_t.current=t}}else e.value=n();return e.value}set(t){const{setter:e}=this;e&&e(t)}add(t){this.unique.set(t,true)}}function Tt(t,e){if(null==t||""===e)return t;const n=at(t,e);return n?n.value:void 0}function jt(t,e,r,s,i,o){const a=function(e,n,r){if(n!==r){const c=tt(t,e);for(let t=0;t<i;t++){const e=s[t];undefined!==rt(c,e)&&o(e,c,n,r)}jt(c,n,r,s,i,o)}};(function(t,e,n){const r=f(t),s=f(e);if(r||s)return n("length",r?t.length:void 0,s?e.length:void 0),!0})(e,r,a)||function(t,e,n){const r=c(t),s=c(e);if(r||s){const i=r?t.length:void 0,o=s?e.length:void 0;n("length",i,o);for(let c=0,u=Math.max(i||0,o||0);c<u;c++)n(""+c,r?t[c]:void 0,s?e[c]:void 0);return!0}}(e,r,a)||function(t,e,r){const s=u(t),i=u(e);if(s||i){const o=j(),c=s?t:n,u=i?e:n;if(s)for(let t in c){const e=c[t];e!==u[t]&&(o.set(t,!0),r(t,e,u[t]))}if(i)for(let t in u){const e=u[t];void 0===o.get(t)&&e!==c[t]&&r(t,c[t],e)}}}(e,r,a)}function Ct(t,e,n,r,s,i){let o;for(const c in r)if(et(c))undefined!==rt(t,c)?i(c,t,e,n):s&&(o?o.push(c):o=[c]);else{const r=J(c,t);if(r>=0){const t=F(c,r),s=Tt(e,t),o=Tt(n,t);s!==o&&i(c,c,s,o)}}o&&jt(t,e,n,o,o.length,i)}const Dt={watcher:e};function Pt(t,e){return o(t)?(Dt.watcher=t,Dt.immediate=true===e,Dt):t}class Rt{constructor(t,e,n){const r=this;r.data=t||{},r.context=e||r,r.nextTask=n||new At,r.syncEmitter=new bt,r.asyncEmitter=new bt,r.asyncOldValues={},r.asyncKeypaths={}}get(t,e,n){const r=_t.current,{data:s,computed:i}=this;if(""===t)return s;let o;return r&&!n&&r.add(t),i&&(o=at(i,t)),o||(o=at(s,t)),o?o.value:e}set(t,e){const n=this,{data:r,computed:s}=n,i=function(t,e){const i=n.get(t);if(e===i)return;let o;X(t,(function(t,n,i){0!==n?o&&(n===i?o[t]=e:o=o[t]||(o[t]={})):s&&s[t]?0===i?s[t].set(e):o=s[t].get():0===i?r[t]=e:o=r[t]||(r[t]={})})),n.diff(t,e,i)};if(f(t))i(t,e);else if(u(t))for(let e in t)i(e,t[e])}diff(t,e,n){let r=this,{syncEmitter:s,asyncEmitter:i,asyncOldValues:o,asyncKeypaths:c}=r,u=36!==M(t);Ct(t,e,n,s.listeners,u,(function(t,e,n,r){s.fire({type:t,ns:""},[n,r,e])})),Ct(t,e,n,i.listeners,u,(function(t,e,n,s){const u=i.listeners[t];for(let t=0,e=u.length;t<e;t++)u[t].count++;c[e]||(o[e]=s,c[e]={}),c[e][t]=true,r.pending||(r.pending=true,r.nextTask.append((function(){r.pending&&r.diffAsync()})))}))}diffAsync(){const t=this,{asyncEmitter:e,asyncOldValues:n,asyncKeypaths:r}=t;t.pending=undefined,t.asyncOldValues={},t.asyncKeypaths={};for(let s in n){const i=[t.get(s),n[s],s],o=r[s],c=i[0]!==i[1],u=function(t,e,n){if(n.count)return n.count--,c};for(let t in o)e.fire({type:t,ns:""},i,u)}}addComputed(t,e){let n,r,s,i=this,c=i.context,f=true,a=true;if(o(e))r=e.bind(c);else if(u(e)){const t=e;l(t.cache)&&(f=t.cache),l(t.sync)&&(a=t.sync),O(t.deps)||(n=t.deps),o(t.get)&&(r=t.get.bind(c)),o(t.set)&&(s=t.set.bind(c))}if(r){const e=new _t(t,a,f,n,i,r,s);return i.computed||(i.computed={}),i.computed[t]=e,e}}removeComputed(t){const{computed:e}=this;e&&lt(e,t)&&delete e[t]}watch(t,e,n){const r=this,{context:s,syncEmitter:i,asyncEmitter:o}=r,c=function(t,e){const n=e.sync?i:o,c={ns:"",listener:e.watcher,ctx:s,count:0};e.once&&(c.max=1),n.on(t,c),e.immediate&&p(e.watcher,s,[r.get(t),undefined,t])};if(f(t))c(t,Pt(e,n));else for(let e in t)c(e,Pt(t[e]))}unwatch(t,e){const n={ns:"",listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=Ot(this.get(t),0)+(e||1);if(!a(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=Ot(this.get(t),0)-(e||1);if(!a(n)||r>=n)return this.set(t,r),r}insert(t,e,n){let r=this.get(t);r=c(r)?r.slice():[];const{length:s}=r;if(true===n||n===s)r.push(e);else if(false===n||0===n)r.unshift(e);else{if(!(n>0&&n<s))return;r.splice(n,0,e)}return this.set(t,r),true}append(t,e){return this.insert(t,e,true)}prepend(t,e){return this.insert(t,e,false)}removeAt(t,e){let n=this.get(t);if(c(n)&&e>=0&&e<n.length)return n=n.slice(),n.splice(e,1),this.set(t,n),true}remove(t,e){let n=this.get(t);if(c(n)&&(n=n.slice(),E(n,e)))return this.set(t,n),true}copy(t,e){return ft(t,e)}destroy(){const t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),ct(t)}}class zt{constructor(t){const e=this,r=t||n;e.$emitter=new bt(true),r.events&&e.on(r.events);let{data:s,props:i,vnode:c,propTypes:f,computed:a,methods:l,watchers:h,extensions:d}=r;e.$options=r,d&&ut(e,d);const g=i?ft(i):{},y=e.$observer=new Rt(g,e,e.$nextTask=new At({afterTask(){e.$isDirty&&(e.$isDirty=undefined,e.update(e.render(),e.$vnode))}}));a&&ot(a,(function(t,e){y.addComputed(e,t)}));const v=o(s)?p(s,e,t):s;u(v)&&ot(v,(function(t,e){g[e]=t})),l&&ot(l,(function(t,n){e[n]=t})),h&&y.watch(h)}static define(t){return t}static use(t){t.install(zt)}static nextTick(t,e){At.shared().append(t,e)}static compile(t,e){return t}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}get(t,e){return this.$observer.get(t,e)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return Nt(this,t,e),this}once(t,e){return Nt(this,t,e,true),this}off(t,e){return this.$emitter.off(t,e),this}fire(t,e,n){const r=this,{$emitter:s,$parent:i,$children:o}=r;let c;if(g.is(t))c=t;else if(f(t))c=new g(t);else{const e=t;c=new g(e.type),c.ns=e.ns}if(undefined===c.ns){const t=s.toEvent(c.type);c.type=t.type,c.ns=t.ns}c.target||(c.target=r);let a,l=[c];return u(e)?w(l,e):true===e&&(n=true),a=!(!n||c.target!==r)||s.fire(c,l),a&&(n?o&&(c.phase=g.PHASE_DOWNWARD,y(o,(function(t){return a=t.fire(c,e,true)}))):i&&(c.phase=g.PHASE_UPWARD,a=i.fire(c,e))),a}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),ct(this)}nextTick(t){this.$nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function St(t,e,n,r){const{$emitter:s}=t,i=s.toFilter(e,n),o={listener:i.listener,ns:i.ns,ctx:t};r&&(o.max=1),s.on(i.type,o)}function Nt(t,e,n,r){f(e)?St(t,e,n,r):ot(e,(function(e,n){St(t,n,e,r)}))}zt.version="1.0.0-alpha.217",zt.is=d,zt.array=_,zt.object=ht,zt.string=q,zt.logger=mt,zt.Event=g,zt.Emitter=bt,zt.config=i;export default zt;
//# sourceMappingURL=yox.esm.min.js.map
