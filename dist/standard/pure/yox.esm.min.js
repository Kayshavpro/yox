const t="undefined"!=typeof window?window:undefined,e=function(){},n=Object.freeze({}),r=Object.freeze([]),i=/yox/.test(e.toString())?2:3,s={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:false,minifyCompiled:false,logLevel:i};function o(t){return"function"==typeof t}function c(t){return Array.isArray(t)}function u(t){return null!==t&&"object"==typeof t}function f(t){return"string"==typeof t}function l(t){return"number"==typeof t&&!isNaN(t)}function a(t){return"boolean"==typeof t}function h(t){return l(t)||f(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var p=Object.freeze({__proto__:null,func:o,array:c,object:u,string:f,number:l,boolean:a,numeric:h});function d(t,e,n){if(o(t))return c(n)?t.apply(e,n):undefined!==e?t.call(e,n):undefined!==n?t(n):t()}class g{constructor(t,e){this.type=t,this.phase=g.PHASE_CURRENT,e&&(this.originalEvent=e)}static is(t){return t instanceof g}preventDefault(){const t=this;if(!t.isPrevented){const{originalEvent:e}=t;e&&e.preventDefault(),t.isPrevented=true}return t}stopPropagation(){const t=this;if(!t.isStoped){const{originalEvent:e}=t;e&&e.stopPropagation(),t.isStoped=true}return t}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function y(t,e,n){const{length:r}=t;if(r)if(n)for(let n=r-1;n>=0&&false!==e(t[n],n);n--);else for(let n=0;n<r&&false!==e(t[n],n);n++);}function m(t,e){t[t.length]=e}function v(t,e){t.unshift(e)}function b(t,e,n){c(e)?y(e,(function(e){n(t,e)})):n(t,e)}function w(t,e){b(t,e,m)}function x(t,e){b(t,e,v)}function $(t,e,n){let r=-1;return y(t,(function(t,i){if(false===n?t==e:t===e)return r=i,false})),r}function E(t,e,n){let r=0;return y(t,(function(i,s){(false===n?i==e:i===e)&&(t.splice(s,1),r++)}),true),r}function O(t,e,n){return $(t,e,n)>=0}function k(t){return!c(t)||!t.length}g.PHASE_CURRENT=0,g.PHASE_UPWARD=1,g.PHASE_DOWNWARD=-1;var A=Object.freeze({__proto__:null,each:y,push:w,unshift:x,indexOf:$,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:E,has:O,toArray:function(t){return c(t)?t:d(r.slice,t)},toObject:function(t,e,n){let r={};return y(t,(function(t){r[e?t[e]:t]=n||t})),r},join:function(t,e){return t.join(e)},falsy:k});function _(t){return o(t)&&function(t,e){return null!=t&&t.toString?t.toString():void 0!==e?e:""}(t).indexOf("[native code]")>=0}let j=function(){const t=Object.create(null);return{get:e=>t[e],set(e,n){t[e]=n},keys:()=>Object.keys(t)}};function C(t){const e=j();return function(n){const r=e.get(n);if(undefined!==r)return r;const i=t(n);return e.set(n,i),i}}function z(t){const e=j();return function(n,r){let i=e.get(n);if(i){const t=i.get(r);if(t)return t}else i=j(),e.set(n,i);const s=t(n,r);return i.set(r,s),s}}const P=/-([a-z])/gi,R=/\B([A-Z])/g,D=/^[a-z]/,S=C((function(t){return t.replace(P,(function(t,e){return Y(e)}))})),T=C((function(t){return t.replace(R,(function(t,e){return"-"+q(e)}))})),N=C((function(t){return t.replace(D,Y)}));function W(t,e){return new Array(e+1).join(t)}function F(t,e,n){return l(n)?e===n?"":t.slice(e,n):t.slice(e)}function U(t,e,n){return t.indexOf(e,undefined!==n?n:0)}function H(t,e,n){return t.lastIndexOf(e,undefined!==n?n:t.length)}function I(t,e){return 0===U(t,e)}function M(t,e){return t.charCodeAt(e||0)}function Y(t){return t.toUpperCase()}function q(t){return t.toLowerCase()}function K(t,e){return U(t,e)>=0}function L(t){return!f(t)||!t.length}var V=Object.freeze({__proto__:null,camelize:S,hyphenate:T,capitalize:N,repeat:W,trim:function(t){return L(t)?"":t.trim()},slice:F,indexOf:U,lastIndexOf:H,startsWith:I,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&H(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:M,upper:Y,lower:q,has:K,falsy:L});const B=/\./g,G=/\*/g,Z=/\*\*/g,J=z((function(t,e){return t===e||I(t,e+=".")?e.length:-1})),Q=C((function(t){return U(t,".")<0?[t]:t.split(".")}));function X(t,e){const n=Q(t);for(let t=0,r=n.length-1;t<=r&&false!==e(n[t],t,r);t++);}const tt=z((function(t,e){return t&&e?t+"."+e:t||e})),et=C((function(t){return K(t,"*")})),nt=C((function(t){return new RegExp(`^${t.replace(B,"\\.").replace(G,"(\\w+)").replace(Z,"([.\\w]+?)")}$`)})),rt=z((function(t,e){const n=t.match(nt(e));return n?n[1]:undefined})),it={value:undefined};function st(t){return Object.keys(t)}function ot(t,e){for(let n in t)if(false===e(t[n],n))break}function ct(t){ot(t,(function(e,n){delete t[n]}))}function ut(t,e){return ot(e,(function(e,n){t[n]=e})),t}function ft(t,e){let n=t;return c(t)?e?(n=[],y(t,(function(t,r){n[r]=ft(t,e)}))):n=t.slice():u(t)&&(n={},ot(t,(function(t,r){n[r]=e?ft(t,e):t}))),n}function lt(t,e){return X(e,(function(e,n,r){if(null==t)return t=undefined,false;{let i=t[e],s=undefined!==i;i&&o(i.get)&&(i=i.get()),n===r?s?(it.value=i,t=it):t=undefined:t=i}})),t}function at(t,e){return undefined!==t[e]}var ht=Object.freeze({__proto__:null,keys:st,each:ot,clear:ct,extend:ut,merge:function(t,e){return t&&e?ut(ut({},t),e):t||e},copy:ft,get:lt,set:function(t,e,n,r){X(e,(function(e,i,s){if(i===s)t[e]=n;else if(t[e])t=t[e];else{if(!r)return false;t=t[e]={}}}))},has:at,falsy:function(t){return!u(t)||c(t)||!st(t).length}});const pt="undefined"!=typeof console?console:null,dt=t&&/edge|msie|trident/i.test(t.navigator.userAgent)?"":"%c",gt=pt?dt?function(t,e,n){pt.log(dt+t,n,e)}:function(t,e){pt.log(t,e)}:e;function yt(){const{logLevel:t}=s;return t>=1&&t<=5?t:i}function mt(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var vt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){yt()<=1&&gt(e||"Yox debug",t,mt("#999"))},info:function(t,e){yt()<=2&&gt(e||"Yox info",t,mt("#2db7f5"))},warn:function(t,e){yt()<=3&&gt(e||"Yox warn",t,mt("#f90"))},error:function(t,e){yt()<=4&&gt(e||"Yox error",t,mt("#ed4014"))},fatal:function(t,e){if(yt()<=5)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class bt{constructor(t){this.ns=t||false,this.listeners={}}fire(t,e,n){let r=this,i=f(t)?r.toEvent(t):t,s=r.listeners[i.type],o=true;if(s){s=s.slice();const t=e&&g.is(e[0])?e[0]:undefined;for(let c=0,u=s.length;c<u;c++){let u=s[c];if(!xt(i.ns,u)||!O(s,u)||n&&!n(i,e,u))continue;t&&(t.listener=u.listener);let f=d(u.listener,u.ctx,e);if(t&&(t.listener=undefined),u.num=u.num?u.num+1:1,u.num===u.max&&r.off(i.type,{ns:i.ns,listener:u.listener}),t&&(false===f?t.prevent().stop():t.isStoped&&(f=false)),false===f){o=false;break}}}return o}on(t,e){const n=this,r=n.listeners,i=o(e)?{listener:e}:e;if(u(i)&&o(i.listener)){if(!f(i.ns)){const e=n.toEvent(t);i.ns=e.ns,t=e.type}w(r[t]||(r[t]=[]),i)}}off(t,e){const n=this,r=n.listeners;if(t){const i=n.toFilter(t,e),s=function(t,e){y(t,(function(e,n){wt(i.listener,e)&&xt(i.ns,e)&&t.splice(n,1)}),true),t.length||delete r[e]};i.type?r[i.type]&&s(r[i.type],i.type):i.ns&&ot(r,s)}else n.listeners={}}has(t,e){let n=this.listeners,r=this.toFilter(t,e),i=true,s=function(t){return y(t,(function(t){if(wt(r.listener,t)&&xt(r.ns,t))return i=false})),i};return r.type?n[r.type]&&s(n[r.type]):r.ns&&ot(n,s),!i}toEvent(t){const e={type:t,ns:""};if(this.ns){const n=U(t,".");n>=0&&(e.type=F(t,0,n),e.ns=F(t,n+1))}return e}toFilter(t,e){let n;if(n=e?o(e)?{listener:e}:e:{},f(n.ns))n.type=t;else{const e=this.toEvent(t);n.type=e.type,n.ns=e.ns}return n}}function wt(t,e){return!t||t===e.listener}function xt(t,e){const{ns:n}=e;return!n||!t||n===t}let $t;"function"==typeof setImmediate&&_(setImmediate)&&($t=setImmediate),$t="function"==typeof MessageChannel&&_(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;var Et=$t;let Ot;class kt{constructor(){this.tasks=[]}static shared(){return Ot||(Ot=new kt)}append(t,e){const n=this,{tasks:r}=n;w(r,{fn:t,ctx:e}),1===r.length&&Et((function(){n.run()}))}prepend(t,e){const n=this,{tasks:r}=n;x(r,{fn:t,ctx:e}),1===r.length&&Et((function(){n.run()}))}clear(){this.tasks.length=0}run(){const{tasks:t}=this;t.length&&(this.tasks=[],y(t,(function(t){d(t.fn,t.ctx)})))}}function At(t){const e=j();return y(t.split(","),(function(t){e.set(t,true)})),e}At("area,base,embed,track,source,param,input,col,img,br,hr"),At("svg,g,defs,desc,metadata,symbol,use,image,path,rect,circle,line,ellipse,polyline,polygon,text,tspan,tref,textpath,marker,pattern,clippath,mask,filter,cursor,view,animate,font,font-face,glyph,missing-glyph,foreignObject"),At("id,class,name,value,for,accesskey,title,style,src,type,href,target,alt,placeholder,preload,poster,wrap,accept,pattern,dir,autocomplete,autocapitalize"),At("min,minlength,max,maxlength,step,width,height,size,rows,cols,tabindex"),At("disabled,checked,required,multiple,readonly,autofocus,autoplay,controls,loop,muted,novalidate,draggable,hidden,spellcheck");function _t(t,e){return h(t)?+t:undefined!==e?e:0}W("'",2);class jt{constructor(t,e,n,r,i,s,o){const c=this;if(c.keypath=t,c.cache=n,c.deps=r,c.observer=i,c.getter=s,c.setter=o,c.watcherOptions={sync:e,watcher:c.watcher=function(e,n,r){const s=c.value,o=c.get(true);o!==s&&i.diff(t,o,s)}},r){c.fixed=true;for(let t=0,e=r.length;t<e;t++)i.watch(r[t],c.watcherOptions)}}get(t){const e=this,{getter:n,deps:r,observer:i,watcher:s,watcherOptions:o}=e;if(e.cache){if(t||!at(e,"value"))if(e.fixed)e.value=n();else{if(r)for(let t=r.length-1;t>=0;t--)i.unwatch(r[t],s);e.unique=j();const t=jt.current;jt.current=e,e.value=n();const c=e.unique.keys();for(let t=0,e=c.length;t<e;t++)i.watch(c[t],o);e.deps=c,jt.current=t}}else e.value=n();return e.value}set(t){const{setter:e}=this;e&&e(t)}add(t){this.unique.set(t,true)}}function Ct(t,e){if(null==t||""===e)return t;const n=lt(t,e);return n?n.value:void 0}function zt(t,e,r,i,s,o){const l=function(e,n,r){if(n!==r){const c=tt(t,e);for(let t=0;t<s;t++){const e=i[t];undefined!==rt(c,e)&&o(e,c,n,r)}zt(c,n,r,i,s,o)}};(function(t,e,n){const r=f(t),i=f(e);if(r||i)return n("length",r?t.length:void 0,i?e.length:void 0),!0})(e,r,l)||function(t,e,n){const r=c(t),i=c(e);if(r||i){const s=r?t.length:void 0,o=i?e.length:void 0;n("length",s,o);for(let c=0,u=Math.max(s||0,o||0);c<u;c++)n(""+c,r?t[c]:void 0,i?e[c]:void 0);return!0}}(e,r,l)||function(t,e,r){const i=u(t),s=u(e);if(i||s){const o=j(),c=i?t:n,u=s?e:n;if(i)for(let t in c){const e=c[t];e!==u[t]&&(o.set(t,!0),r(t,e,u[t]))}if(s)for(let t in u){const e=u[t];void 0===o.get(t)&&e!==c[t]&&r(t,c[t],e)}}}(e,r,l)}function Pt(t,e,n,r,i,s){let o;for(const c in r)if(et(c))undefined!==rt(t,c)?s(c,t,e,n):i&&(o?o.push(c):o=[c]);else{const r=J(c,t);if(r>=0){const t=F(c,r),i=Ct(e,t),o=Ct(n,t);i!==o&&s(c,c,i,o)}}o&&zt(t,e,n,o,o.length,s)}const Rt={watcher:e};function Dt(t,e){return o(t)?(Rt.watcher=t,Rt.immediate=true===e,Rt):t}class St{constructor(t,e){const n=this;n.data=t||{},n.context=e||n,n.nextTask=new kt,n.syncEmitter=new bt,n.asyncEmitter=new bt,n.asyncOldValues={},n.asyncKeypaths={}}get(t,e,n){const r=jt.current,{data:i,computed:s}=this;if(""===t)return i;let o;return r&&!n&&r.add(t),s&&(o=lt(s,t)),o||(o=lt(i,t)),o?o.value:e}set(t,e){const n=this,{data:r,computed:i}=n,s=function(t,e){const s=n.get(t);if(e===s)return;let o;X(t,(function(t,n,s){0!==n?o&&(n===s?o[t]=e:o=o[t]||(o[t]={})):i&&i[t]?0===s?i[t].set(e):o=i[t].get():0===s?r[t]=e:o=r[t]||(r[t]={})})),n.diff(t,e,s)};if(f(t))s(t,e);else if(u(t))for(let e in t)s(e,t[e])}diff(t,e,n){let r=this,{syncEmitter:i,asyncEmitter:s,asyncOldValues:o,asyncKeypaths:c}=r,u=36!==M(t);Pt(t,e,n,i.listeners,u,(function(t,e,n,r){i.fire({type:t,ns:""},[n,r,e])})),Pt(t,e,n,s.listeners,u,(function(t,e,n,i){const u=s.listeners[t];for(let t=0,e=u.length;t<e;t++)u[t].count++;c[e]||(o[e]=i,c[e]={}),c[e][t]=true,r.pending||(r.pending=true,r.nextTask.append((function(){r.pending&&r.diffAsync()})))}))}diffAsync(){const t=this,{asyncEmitter:e,asyncOldValues:n,asyncKeypaths:r}=t;t.pending=undefined,t.asyncOldValues={},t.asyncKeypaths={};for(let i in n){const s=[t.get(i),n[i],i],o=r[i],c=s[0]!==s[1],u=function(t,e,n){if(n.count)return n.count--,c};for(let t in o)e.fire({type:t,ns:""},s,u)}}addComputed(t,e){let n,r,i,s=this,c=s.context,f=true,l=true;if(o(e))r=e.bind(c);else if(u(e)){const t=e;a(t.cache)&&(f=t.cache),a(t.sync)&&(l=t.sync),k(t.deps)||(n=t.deps),o(t.get)&&(r=t.get.bind(c)),o(t.set)&&(i=t.set.bind(c))}if(r){const e=new jt(t,l,f,n,s,r,i);return s.computed||(s.computed={}),s.computed[t]=e,e}}removeComputed(t){const{computed:e}=this;e&&at(e,t)&&delete e[t]}watch(t,e,n){const r=this,{context:i,syncEmitter:s,asyncEmitter:o}=r,c=function(t,e){const n=e.sync?s:o,c={ns:"",listener:e.watcher,ctx:i,count:0};e.once&&(c.max=1),n.on(t,c),e.immediate&&d(e.watcher,i,[r.get(t),undefined,t])};if(f(t))c(t,Dt(e,n));else for(let e in t)c(e,Dt(t[e]))}unwatch(t,e){const n={ns:"",listener:e};this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=_t(this.get(t),0)+(e||1);if(!l(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=_t(this.get(t),0)-(e||1);if(!l(n)||r>=n)return this.set(t,r),r}insert(t,e,n){let r=this.get(t);r=c(r)?r.slice():[];const{length:i}=r;if(true===n||n===i)r.push(e);else if(false===n||0===n)r.unshift(e);else{if(!(n>0&&n<i))return;r.splice(n,0,e)}return this.set(t,r),true}append(t,e){return this.insert(t,e,true)}prepend(t,e){return this.insert(t,e,false)}removeAt(t,e){let n=this.get(t);if(c(n)&&e>=0&&e<n.length)return n=n.slice(),n.splice(e,1),this.set(t,n),true}remove(t,e){let n=this.get(t);if(c(n)&&(n=n.slice(),E(n,e)))return this.set(t,n),true}copy(t,e){return ft(t,e)}destroy(){const t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),ct(t)}}const Tt=new class{constructor(){this.$emitter=new bt}fire(t,e,n){this.$emitter.fire(e,[t,n])}on(t,e){return this.$emitter.on(t,e),this}off(t,e){return this.$emitter.off(t,e),this}};class Nt{constructor(t){const e=this,r=t||n;e.$emitter=new bt(true),r.events&&e.on(r.events);let{data:i,props:s,vnode:c,propTypes:f,computed:l,methods:a,watchers:h,extensions:p}=r;e.$options=r,p&&ut(e,p);const g=s?ft(s):{},y=e.$observer=new St(g,e);l&&ot(l,(function(t,e){y.addComputed(e,t)}));const m=o(i)?d(i,e,t):i;u(m)&&ot(m,(function(t,e){g[e]=t})),a&&ot(a,(function(t,n){e[n]=t})),h&&e.watch(h)}static define(t){return t}static use(t){t.install(Nt)}static nextTick(t,e){kt.shared().append(t,e)}static compile(t,e){return t}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}get(t,e){return this.$observer.get(t,e)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return Ft(this,t,e),this}once(t,e){return Ft(this,t,e,true),this}off(t,e){return this.$emitter.off(t,e),this}fire(t,e,n){const r=this,{$emitter:i,$parent:s,$children:o}=r;let c;if(g.is(t))c=t;else if(f(t))c=new g(t);else{const e=t;c=new g(e.type),c.ns=e.ns}if(undefined===c.ns){const t=i.toEvent(c.type);c.type=t.type,c.ns=t.ns}c.target||(c.target=r);let l,a=[c];return u(e)?w(a,e):true===e&&(n=true),l=!(!n||c.target!==r)||i.fire(c,a),l&&(n?o&&(c.phase=g.PHASE_DOWNWARD,y(o,(function(t){return l=t.fire(c,e,true)}))):s&&(c.phase=g.PHASE_UPWARD,l=s.fire(c,e))),l}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),ct(this)}nextTick(t){this.$observer.nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function Wt(t,e,n,r){const{$emitter:i}=t,s=i.toFilter(e,n),o={listener:s.listener,ns:s.ns,ctx:t};r&&(o.max=1),i.on(s.type,o)}function Ft(t,e,n,r){f(e)?Wt(t,e,n,r):ot(e,(function(e,n){Wt(t,n,e,r)}))}Nt.version="1.0.0-alpha.203",Nt.is=p,Nt.array=A,Nt.object=ht,Nt.string=V,Nt.logger=vt,Nt.Event=g,Nt.Emitter=bt,Nt.config=s,Nt.lifeCycle=Tt;export default Nt;
//# sourceMappingURL=yox.esm.min.js.map
